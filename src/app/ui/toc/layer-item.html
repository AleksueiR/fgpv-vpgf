<div class="rv-layer-item-inner-container" ng-class="{ 'rv-selected': self.layer.selected }">

    <md-button
        aria-label='layer data'
        class="rv-layer-body-button rv-button-square"
        rv-help="layer-item"
        ng-if="self.layer.options.data"
        ng-click="self.toggleLayerFiltersPanel(self.layer)">
        <!-- TODO: add aria attribues on the button to provide context on what it does; also mute the actual layer name below, so a screen reader wouldn't pronounce it twice-->
    </md-button>

    <rv-layer-item-symbology symbology="self.layer.symbology"></rv-layer-item-symbology>

    <div class="rv-layer-item-content">
        <div class="rv-layer-item-name">
            {{ self.layer.name }}
        </div>
        <div class="rv-layer-item-flags">
            <rv-layer-item-flag name="type"></rv-layer-item-flag>
            <rv-layer-item-flag name="data"></rv-layer-item-flag>
            <rv-layer-item-flag name="user"></rv-layer-item-flag>
            <rv-layer-item-flag name="scale"></rv-layer-item-flag>
            <rv-layer-item-flag name="query"></rv-layer-item-flag>
        </div>
    </div>

    <div class="rv-layer-item-toggles" ng-if="self.layer.state === 'error'">

        <rv-layer-item-button name="reload"></rv-layer-item-button>
        <rv-layer-item-button name="remove"></rv-layer-item-button>

    </div>

    <div class="rv-layer-item-toggles" ng-if="self.layer.state !== 'error'">

        <md-menu md-position-mode="target-right target">
            <md-button aria-label="{{'toc.layer.aria.openData' | translate}}" class="md-icon-button rv-button-24" ng-click="$mdOpenMenu($event)">
                <md-icon md-svg-src="navigation:more_horiz"></md-icon>
            </md-button>

            <md-menu-content class="rv-menu rv-dense" width="4">
                <rv-layer-item-button type="menu-item" name="metadata"></rv-layer-item-button>
                <rv-layer-item-button type="menu-item" name="settings"></rv-layer-item-button>
                <md-menu-divider></md-menu-divider>
                <rv-layer-item-button type="menu-item" name="remove"></rv-layer-item-button>
            </md-menu-content>
        </md-menu>

        <!--rv-layer-item-button name="metadata"></rv-layer-item-button>
        <rv-layer-item-button name="settings"></rv-layer-item-button-->

        <rv-layer-item-button name="visibility"></rv-layer-item-button>
    </div>
</div>
