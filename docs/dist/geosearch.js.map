{"version":3,"sources":["webpack:///geosearch.js","webpack:///webpack/bootstrap afa6404d9c7bb2132f27","webpack:///./src/index.ts","webpack:///./src/query.ts","webpack:///./src/provinces.ts","webpack:///./data/provinces.json","webpack:///./data/fsa_to_prov.json","webpack:///./src/types.ts","webpack:///./data/types.json","webpack:///./src/definitions.ts"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","90","_interopRequireDefault","obj","default","_classCallCheck","instance","Constructor","TypeError","value","GeoSearch","undefined","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","_query2","_query3","_provinces","_provinces2","_types","_types2","_definitions","defs","newObj","GEO_LOCATE_URL","GEO_NAMES_URL","lastQuery","uConfig","this","language","geoLocateUrl","geoNameUrl","replace","config","types","provinces","maxResults","filterValidTypes","includeTypes","excludeTypes","resultHandler","featureHandler","input","resultContainer","featureContainer","bind","defaultResultHandler","defaultFeatureHandler","docFrag","document","createDocumentFragment","createElement","appendChild","onkeyup","inputChanged","classList","add","results","ul","reverse","forEach","r","li","innerHTML","type","location","province","latLon","lat","lon","fR","output","isFSAResult","fsa","nts","evt","_this","qValue","firstChild","removeChild","query","onComplete","then","q","featureResults","catch","err","window","91","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","test","FSAQuery","substring","toUpperCase","NTSQuery","Query","search","Promise","suggestions","useLocate","restrict","altQuery","url","join","items","filter","validTypes","concise","code","map","list","allTypes","latitude","longitude","bbox","_this2","jsonRequest","getUrl","normalizeNameItems","_this3","resolve","reject","xobj","XMLHttpRequest","open","responseType","onload","status","response","JSON","parse","send","_Query","parseInt","_this4","getPrototypeOf","unitName","locateByQuery","lr","allSheets","locateToResult","unit","splice","findIndex","x","mapSheets","nameByLatLon","lrl","_this5","ls","title","split","shift","desc","geometry","coordinates","otherQ","_Query2","_this6","formatLocationResult","fLR","keys","_this7","locateResponseList","provList","fsaToProvinces","92","_interopRequireWildcard","provinceObj","Provinces","provs","_fsa_to_prov","fsaToProv","provKey","genericObj","provCodes","93","en","10","11","12","13","24","35","46","47","48","59","60","61","62","72","73","fr","94","A","B","C","E","G","H","J","K","L","M","N","P","R","S","T","V","X","Y","95","_toConsumableArray","arr","Array","isArray","arr2","from","typeObj","Types","filterComplete","typeKey","include","exclude","setExclusion","typeSet","Set","keySet","invalidKeys","concat","has","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","return","96","FSA","NTS","PROV","TERR","CITY","TOWN","VILG","HAM","UTM","LTM","STM","MUN1","MUN2","UNP","IR","GEOG","PARK","MIL","RIV","RIVF","FALL","LAKE","SPRG","SEA","SEAF","SEAU","CHAN","RAP","BAY","CAPE","BCH","SHL","ISL","CLF","MTN","VALL","PLN","CAVE","CRAT","GLAC","FOR","VEGL","MISC","RAIL","ROAD","AIR","MAR","HYDR","RECR","RES","CAMP","SITE","97","result","isNTSResult"],"mappings":"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","file":"geosearch.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 90);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 90:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.GeoSearch = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _query2 = __webpack_require__(91);\n\nvar _query3 = _interopRequireDefault(_query2);\n\nvar _provinces = __webpack_require__(92);\n\nvar _provinces2 = _interopRequireDefault(_provinces);\n\nvar _types = __webpack_require__(95);\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _definitions = __webpack_require__(97);\n\nvar defs = _interopRequireWildcard(_definitions);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GEO_LOCATE_URL = 'https://geogratis.gc.ca/services/geolocation/${language}/locate';\nvar GEO_NAMES_URL = 'https://geogratis.gc.ca/services/geoname/${language}/geonames.json';\nvar lastQuery = void 0;\n\nvar GeoSearch = function () {\n    function GeoSearch(uConfig) {\n        _classCallCheck(this, GeoSearch);\n\n        uConfig = uConfig ? uConfig : {};\n        var language = uConfig.language ? uConfig.language : 'en';\n        // set default URLS if none provided and search/replace language in string (if exists)\n        var geoLocateUrl = uConfig.geoLocateUrl ? uConfig.geoLocateUrl : GEO_LOCATE_URL;\n        var geoNameUrl = uConfig.geoNameUrl ? uConfig.geoNameUrl : GEO_NAMES_URL;\n        geoLocateUrl = geoLocateUrl.replace('${language}', language);\n        geoNameUrl = geoNameUrl.replace('${language}', language);\n        this.config = {\n            language: language,\n            types: (0, _types2.default)(language),\n            provinces: (0, _provinces2.default)(language),\n            maxResults: uConfig.maxResults ? uConfig.maxResults : 100,\n            geoNameUrl: geoNameUrl,\n            geoLocateUrl: geoLocateUrl\n        };\n        this.config.types.filterValidTypes(uConfig.includeTypes, uConfig.excludeTypes);\n    }\n\n    _createClass(GeoSearch, [{\n        key: 'ui',\n        value: function ui(resultHandler, featureHandler, input, resultContainer, featureContainer) {\n            // bind scope of provided iterator to this class, or set to internal resultIterator implementation for default behaviour\n            this.resultHandler = resultHandler ? resultHandler.bind(this) : this.defaultResultHandler;\n            this.featureHandler = featureHandler ? featureHandler.bind(this) : this.defaultFeatureHandler;\n            this.docFrag = document.createDocumentFragment();\n            if (!input) {\n                input = document.createElement('input');\n                this.docFrag.appendChild(input);\n            }\n            input.onkeyup = this.inputChanged.bind(this);\n            if (!featureContainer) {\n                this.featureContainer = document.createElement('div');\n                this.docFrag.appendChild(this.featureContainer);\n            } else {\n                this.featureContainer = featureContainer;\n            }\n            if (!resultContainer) {\n                this.resultContainer = document.createElement('div');\n                this.docFrag.appendChild(this.resultContainer);\n            } else {\n                this.resultContainer = resultContainer;\n            }\n            this.resultContainer.classList.add('geosearch-ui');\n            this.featureContainer.classList.add('geosearch-ui');\n            return this;\n        }\n    }, {\n        key: 'defaultResultHandler',\n        value: function defaultResultHandler(results) {\n            var ul = document.createElement('ul');\n            results.reverse().forEach(function (r) {\n                var li = document.createElement('li');\n                li.innerHTML = r.name + ' (' + r.type + ')' + (r.location ? ', ' + r.location : '') + ', ' + r.province + ' @ lat: ' + r.latLon.lat + ', lon: ' + r.latLon.lon;\n                ul.appendChild(li);\n            });\n            return ul;\n        }\n    }, {\n        key: 'defaultFeatureHandler',\n        value: function defaultFeatureHandler(fR) {\n            var output = void 0;\n            if (defs.isFSAResult(fR)) {\n                output = fR.fsa + ' - FSA located in ' + fR.province + ' @ lat: ' + fR.latLon.lat + ', lon: ' + fR.latLon.lon;\n            } else {\n                output = fR.nts + ' - NTS located in ' + fR.location + ' @ lat: ' + fR.latLon.lat + ', lon: ' + fR.latLon.lon;\n            }\n            var p = document.createElement('p');\n            p.innerHTML = output;\n            return p;\n        }\n    }, {\n        key: 'inputChanged',\n        value: function inputChanged(evt) {\n            var _this = this;\n\n            var qValue = evt.target.value;\n            if (qValue.length > 2 && qValue !== lastQuery) {\n                lastQuery = qValue;\n                while (this.resultContainer.firstChild) {\n                    this.resultContainer.removeChild(this.resultContainer.firstChild);\n                }\n                while (this.featureContainer.firstChild) {\n                    this.featureContainer.removeChild(this.featureContainer.firstChild);\n                }\n                this.query(qValue).onComplete.then(function (q) {\n                    if (q.featureResults) {\n                        _this.featureContainer.appendChild(_this.featureHandler(q.featureResults));\n                    }\n                    _this.resultContainer.appendChild(_this.resultHandler(q.results));\n                }).catch(function (err) {\n                    var p = document.createElement('p');\n                    p.innerHTML = err;\n                    _this.resultContainer.appendChild(p);\n                });\n            }\n        }\n    }, {\n        key: 'query',\n        value: function query(_query) {\n            return (0, _query3.default)(this.config, _query);\n        }\n    }, {\n        key: 'htmlElem',\n        get: function get() {\n            return this.docFrag;\n        }\n    }]);\n\n    return GeoSearch;\n}();\n\nexports.GeoSearch = GeoSearch;\n\nif (window) {\n    window.GeoSearch = GeoSearch;\n}\n\n/***/ }),\n\n/***/ 91:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.default = function (config, query) {\n    // FSA test\n    if (/^[ABCEGHJKLMNPRSTVXY]\\d[A-Z]/.test(query)) {\n        return new FSAQuery(config, query);\n        // Partial NTS match (Sheet and Map Unit Subdivision)\n    } else if (/^\\d{2,3}[A-P]/.test(query)) {\n        query = query.substring(0, 6).toUpperCase();\n        return new NTSQuery(config, query);\n        // name based search\n    } else if (/^[A-Za-z]/.test(query)) {\n        var q = new Query(config, query);\n        q.onComplete = q.search().then(function (results) {\n            q.results = results;\n            return q;\n        });\n        return q;\n        // posible street address search (not supported) or contains special characters\n    } else {\n        var _q = new Query(config, query);\n        _q.onComplete = new Promise(function (r) {\n            return r(_q);\n        });\n        return _q;\n    }\n};\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Query = exports.Query = function () {\n    function Query(config, query) {\n        _classCallCheck(this, Query);\n\n        this.suggestions = [];\n        this.results = [];\n        this.query = query || null;\n        this.config = config;\n    }\n\n    _createClass(Query, [{\n        key: 'getUrl',\n        value: function getUrl(useLocate, restrict, altQuery, lat, lon) {\n            var url = '';\n            var query = altQuery ? altQuery : this.query;\n            if (useLocate) {\n                url = this.config.geoLocateUrl + '?q=' + query;\n            } else if (lat && lon) {\n                url = this.config.geoNameUrl + '?lat=' + lat + '&lon=' + lon + '&num=' + this.config.maxResults;\n            } else {\n                url = this.config.geoNameUrl + '?q=' + query + '&num=' + this.config.maxResults;\n            }\n            if (restrict) {\n                if (restrict.length === 4) {\n                    url += '&bbox=' + restrict.join(',');\n                } else {\n                    url += '&province=' + restrict.join(',');\n                }\n            }\n            return url;\n        }\n    }, {\n        key: 'normalizeNameItems',\n        value: function normalizeNameItems(items) {\n            var _this = this;\n\n            return items.filter(function (i) {\n                return _this.config.types.validTypes[i.concise.code];\n            }).map(function (i) {\n                return {\n                    name: i.name,\n                    location: i.location,\n                    province: _this.config.provinces.list[i.province.code],\n                    type: _this.config.types.allTypes[i.concise.code],\n                    latLon: { lat: i.latitude, lon: i.longitude },\n                    bbox: i.bbox\n                };\n            });\n        }\n    }, {\n        key: 'search',\n        value: function search(restrict) {\n            var _this2 = this;\n\n            return this.jsonRequest(this.getUrl(false, restrict)).then(function (r) {\n                return _this2.normalizeNameItems(r.items);\n            });\n        }\n    }, {\n        key: 'nameByLatLon',\n        value: function nameByLatLon(lat, lon, restrict) {\n            var _this3 = this;\n\n            return this.jsonRequest(this.getUrl(false, restrict, undefined, lat, lon)).then(function (r) {\n                return _this3.normalizeNameItems(r.items);\n            });\n        }\n    }, {\n        key: 'locateByQuery',\n        value: function locateByQuery(altQuery) {\n            return this.jsonRequest(this.getUrl(true, undefined, altQuery));\n        }\n    }, {\n        key: 'jsonRequest',\n        value: function jsonRequest(url) {\n            return new Promise(function (resolve, reject) {\n                var xobj = new XMLHttpRequest();\n                xobj.open('GET', url, true);\n                xobj.responseType = 'json';\n                xobj.onload = function () {\n                    if (xobj.status === 200) {\n                        resolve(typeof xobj.response === 'string' ? JSON.parse(xobj.response) : xobj.response);\n                    } else {\n                        reject('Could not load results from remote service.');\n                    }\n                };\n                xobj.send();\n            });\n        }\n    }]);\n\n    return Query;\n}();\n/**\r\n * National Topographic System (NTS)\r\n *\r\n * The following definitions have the form \"name (value constraints) - description\"\r\n *\r\n * Sheet (two or three digits)      - aka \"Map Numbers\" are blocks of approximately 4,915,200 hectares.\r\n * Map Units Subdivision ([A-P])    - each sheet is subdivided further into 16 blocks, approximately 307,200 hectares\r\n * Map Sheet Unit ([1-16])          - each map unit is subdivided further into 16 blocks, approximately 19,200 hectares\r\n * Blocks ([A-L])                   - each map sheet unit is subdivided further into 12 blocks, approximately 1600 hectares\r\n * Units ([1-100]*)                 - each block is finally divided into 100 units, approximately 64 hectares\r\n *\r\n * Two subsets of the complete NTS format is supported:\r\n *     - Sheet and Map Unit Subdivision\r\n *     - Sheet, Map Unit Subdivision, and Map Sheet Unit\r\n *\r\n * Note that \"Blocks\" and \"Units\" are currently not supported on geogratis and are ignored on the query.\r\n*/\n\n\nvar NTSQuery = function (_Query) {\n    _inherits(NTSQuery, _Query);\n\n    function NTSQuery(config, query) {\n        _classCallCheck(this, NTSQuery);\n\n        // front pad 0 if NTS starts with two digits\n        query = !parseInt(query[2]) ? '0' + query : query;\n\n        var _this4 = _possibleConstructorReturn(this, (NTSQuery.__proto__ || Object.getPrototypeOf(NTSQuery)).call(this, config, query));\n\n        _this4.unitName = query;\n        _this4.onComplete = new Promise(function (resolve, reject) {\n            _this4.locateByQuery().then(function (lr) {\n                // query check added since it can be null but will never be in this case (make TS happy)\n                if (lr.length > 0 && _this4.query) {\n                    var allSheets = _this4.locateToResult(lr);\n                    _this4.unit = allSheets.splice(allSheets.findIndex(function (x) {\n                        return x.nts === _this4.query;\n                    }), 1)[0];\n                    _this4.mapSheets = allSheets;\n                    _this4.featureResults = _this4.unit;\n                    _this4.nameByLatLon(_this4.unit.latLon.lat, _this4.unit.latLon.lon).then(function (r) {\n                        _this4.results = r;\n                        resolve(_this4);\n                    });\n                } else {\n                    reject('Not found');\n                }\n            });\n        });\n        return _this4;\n    }\n\n    _createClass(NTSQuery, [{\n        key: 'locateToResult',\n        value: function locateToResult(lrl) {\n            var _this5 = this;\n\n            var results = lrl.map(function (ls) {\n                var title = ls.title.split(' ');\n                return {\n                    nts: title.shift() || '',\n                    location: title.join(' '),\n                    code: 'NTS',\n                    desc: _this5.config.types.allTypes['NTS'],\n                    latLon: { lat: ls.geometry.coordinates[1], lon: ls.geometry.coordinates[0] },\n                    bbox: ls.bbox\n                };\n            });\n            return results;\n        }\n    }, {\n        key: 'equals',\n        value: function equals(otherQ) {\n            return this.unitName === otherQ.unitName;\n        }\n    }]);\n\n    return NTSQuery;\n}(Query);\n\nvar FSAQuery = function (_Query2) {\n    _inherits(FSAQuery, _Query2);\n\n    function FSAQuery(config, query) {\n        _classCallCheck(this, FSAQuery);\n\n        query = query.substring(0, 3).toUpperCase();\n\n        var _this6 = _possibleConstructorReturn(this, (FSAQuery.__proto__ || Object.getPrototypeOf(FSAQuery)).call(this, config, query));\n\n        _this6.onComplete = new Promise(function (resolve, reject) {\n            _this6.formatLocationResult().then(function (fLR) {\n                if (fLR !== null) {\n                    _this6.featureResults = fLR;\n                    _this6.nameByLatLon(fLR.latLon.lat, fLR.latLon.lon, Object.keys(fLR._provinces).map(function (x) {\n                        return parseInt(x);\n                    })).then(function (r) {\n                        _this6.results = r;\n                        resolve(_this6);\n                    });\n                } else {\n                    reject('FSA code given cannot be found.');\n                }\n            });\n        });\n        return _this6;\n    }\n\n    _createClass(FSAQuery, [{\n        key: 'formatLocationResult',\n        value: function formatLocationResult() {\n            var _this7 = this;\n\n            return this.locateByQuery().then(function (locateResponseList) {\n                // query check added since it can be null but will never be in this case (make TS happy)\n                if (locateResponseList.length === 1 && _this7.query) {\n                    var provList = _this7.config.provinces.fsaToProvinces(_this7.query);\n                    return {\n                        fsa: _this7.query,\n                        code: 'FSA',\n                        desc: _this7.config.types.allTypes['FSA'],\n                        province: Object.keys(provList).map(function (i) {\n                            return provList[i];\n                        }).join(','),\n                        _provinces: provList,\n                        latLon: { lat: locateResponseList[0].geometry.coordinates[1], lon: locateResponseList[0].geometry.coordinates[0] }\n                    };\n                }\n                return null;\n            });\n        }\n    }]);\n\n    return FSAQuery;\n}(Query);\n\n/***/ }),\n\n/***/ 92:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.default = function (language) {\n    return provinceObj[language] = provinceObj[language] ? provinceObj[language] : new Provinces(language);\n};\n\nvar _provinces = __webpack_require__(93);\n\nvar provs = _interopRequireWildcard(_provinces);\n\nvar _fsa_to_prov = __webpack_require__(94);\n\nvar fsaToProv = _interopRequireWildcard(_fsa_to_prov);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar provinceObj = {};\n\nvar Provinces = function () {\n    function Provinces(language) {\n        var _this = this;\n\n        _classCallCheck(this, Provinces);\n\n        this.list = {};\n        Object.keys(provs[language]).forEach(function (provKey) {\n            _this.list[provKey] = provs[language][provKey];\n        });\n    }\n\n    _createClass(Provinces, [{\n        key: 'fsaToProvinces',\n        value: function fsaToProvinces(fsa) {\n            var _this2 = this;\n\n            var genericObj = {};\n            // either a provincial code, or an array of them\n            var provCodes = fsaToProv[fsa.substring(0, 1).toUpperCase()];\n            if (typeof provCodes === 'number') {\n                provCodes = [provCodes];\n            }\n            provCodes.forEach(function (n) {\n                genericObj[n] = _this2.list[n];\n            });\n            return genericObj;\n        }\n    }]);\n\n    return Provinces;\n}();\n\n/***/ }),\n\n/***/ 93:\n/***/ (function(module, exports) {\n\nmodule.exports = {\"en\":{\"10\":\"Newfoundland and Labrador\",\"11\":\"Prince Edward Island\",\"12\":\"Nova Scotia\",\"13\":\"New Brunswick\",\"24\":\"Quebec\",\"35\":\"Ontario\",\"46\":\"Manitoba\",\"47\":\"Saskatchewan\",\"48\":\"Alberta\",\"59\":\"British Columbia\",\"60\":\"Yukon\",\"61\":\"Northwest Territories\",\"62\":\"Nunavut\",\"72\":\"Undersea Feature\",\"73\":\"International Waters\"},\"fr\":{\"10\":\"Terre-Neuve-et-Labrador\",\"11\":\"Île-du-Prince-Édouard\",\"12\":\"Nouvelle-Écosse\",\"13\":\"Nouveau-Brunswick\",\"24\":\"Québec\",\"35\":\"Ontario\",\"46\":\"Manitoba\",\"47\":\"Saskatchewan\",\"48\":\"Alberta\",\"59\":\"Colombie-Britannique\",\"60\":\"Yukon\",\"61\":\"Territoires du Nord-Ouest\",\"62\":\"Nunavut\",\"72\":\"Entité sous-marine\",\"73\":\"Eaux internationales\"}}\n\n/***/ }),\n\n/***/ 94:\n/***/ (function(module, exports) {\n\nmodule.exports = {\"A\":10,\"B\":12,\"C\":11,\"E\":13,\"G\":24,\"H\":24,\"J\":24,\"K\":35,\"L\":35,\"M\":35,\"N\":35,\"P\":35,\"R\":46,\"S\":47,\"T\":48,\"V\":59,\"X\":[62,61],\"Y\":60}\n\n/***/ }),\n\n/***/ 95:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.default = function (language) {\n    return typeObj[language] = typeObj[language] ? typeObj[language] : new Types(language);\n};\n\nvar _types = __webpack_require__(96);\n\nvar types = _interopRequireWildcard(_types);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar typeObj = {};\n\nvar Types = function () {\n    function Types(language) {\n        var _this = this;\n\n        _classCallCheck(this, Types);\n\n        this.allTypes = {};\n        this.validTypes = {};\n        this.filterComplete = false;\n        Object.keys(types[language]).forEach(function (typeKey) {\n            _this.allTypes[typeKey] = types[language][typeKey];\n            _this.validTypes[typeKey] = types[language][typeKey];\n        });\n    }\n\n    _createClass(Types, [{\n        key: 'filterValidTypes',\n        value: function filterValidTypes(include, exclude) {\n            if (this.filterComplete) {\n                return this.validTypes;\n            }\n            include = typeof include === 'string' ? [include] : include;\n            exclude = typeof exclude === 'string' ? [exclude] : exclude;\n            var setExclusion = include || exclude ? include && include.length > 0 || exclude && exclude.length : null;\n            if (setExclusion !== null) {\n                var typeSet = new Set(Object.keys(this.validTypes));\n                var keySet = new Set(include || exclude);\n                var invalidKeys = new Set([].concat(_toConsumableArray(typeSet)).filter(function (x) {\n                    return !setExclusion === keySet.has(x);\n                }));\n                var _iteratorNormalCompletion = true;\n                var _didIteratorError = false;\n                var _iteratorError = undefined;\n\n                try {\n                    for (var _iterator = invalidKeys[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                        var key = _step.value;\n\n                        delete this.validTypes[key];\n                    }\n                } catch (err) {\n                    _didIteratorError = true;\n                    _iteratorError = err;\n                } finally {\n                    try {\n                        if (!_iteratorNormalCompletion && _iterator.return) {\n                            _iterator.return();\n                        }\n                    } finally {\n                        if (_didIteratorError) {\n                            throw _iteratorError;\n                        }\n                    }\n                }\n            }\n            this.filterComplete = true;\n            return this.validTypes;\n        }\n    }]);\n\n    return Types;\n}();\n\n/***/ }),\n\n/***/ 96:\n/***/ (function(module, exports) {\n\nmodule.exports = {\"en\":{\"FSA\":\"Forward Sortation Area\",\"NTS\":\"National Topographic System\",\"PROV\":\"Province\",\"TERR\":\"Territory\",\"CITY\":\"City\",\"TOWN\":\"Town\",\"VILG\":\"Village\",\"HAM\":\"Hamlet\",\"UTM\":\"Upper Tier Municipality\",\"LTM\":\"Lower Tier Municipality\",\"STM\":\"Single Tier Municipality\",\"MUN1\":\"Other Municipal-District Area-Major Agglom.\",\"MUN2\":\"Other Municipal-District Area-Miscellaneous\",\"UNP\":\"Unincorporated place\",\"IR\":\"Indian Reserve\",\"GEOG\":\"Geographical Area\",\"PARK\":\"Conservation Area\",\"MIL\":\"Military Area\",\"RIV\":\"River\",\"RIVF\":\"River Feature\",\"FALL\":\"Falls\",\"LAKE\":\"Lake\",\"SPRG\":\"Spring\",\"SEA\":\"Sea\",\"SEAF\":\"Sea Feature\",\"SEAU\":\"Undersea Feature\",\"CHAN\":\"Channel\",\"RAP\":\"Rapids\",\"BAY\":\"Bay\",\"CAPE\":\"Cape\",\"BCH\":\"Beach\",\"SHL\":\"Shoal\",\"ISL\":\"Island\",\"CLF\":\"Cliff\",\"MTN\":\"Mountain\",\"VALL\":\"Valley\",\"PLN\":\"Plain\",\"CAVE\":\"Cave\",\"CRAT\":\"Crater\",\"GLAC\":\"Glacier\",\"FOR\":\"Forest\",\"VEGL\":\"Low Vegetation\",\"MISC\":\"Miscellaneous\",\"RAIL\":\"Railway Feature\",\"ROAD\":\"Road Feature\",\"AIR\":\"Air Navigation Feature\",\"MAR\":\"Marine Navigation Feature\",\"HYDR\":\"Hydraulic Construction\",\"RECR\":\"Recreational Site\",\"RES\":\"Natural Resources Site\",\"CAMP\":\"Miscellaneous Campsite\",\"SITE\":\"Miscellaneous Site\"},\"fr\":{\"FSA\":\"Région De Tri D'Acheminement\",\"NTS\":\"Système National De Référence Cartographique\",\"PROV\":\"Province\",\"TERR\":\"Territoire\",\"CITY\":\"Ville\",\"TOWN\":\"Ville\",\"VILG\":\"Village\",\"HAM\":\"Hameau\",\"UTM\":\"Municipalité de palier supérieure\",\"LTM\":\"Municipalité de palier inférieur\",\"STM\":\"Municipalité de palier simple\",\"MUN1\":\"Autre zone municip.-District-Agglom. majeure\",\"MUN2\":\"Autre zone municipale-District-Divers\",\"UNP\":\"Lieu non organisé\",\"IR\":\"Réserve indienne\",\"GEOG\":\"Zone géographique\",\"PARK\":\"Zone de préservation\",\"MIL\":\"Réserve militaire\",\"RIV\":\"Cours d'eau\",\"RIVF\":\"Entité fluviale\",\"FALL\":\"Chute\",\"LAKE\":\"Lac\",\"SPRG\":\"Source\",\"SEA\":\"Mer\",\"SEAF\":\"Entité maritime\",\"SEAU\":\"Entité sous-marine\",\"CHAN\":\"Chenal\",\"RAP\":\"Rapide\",\"BAY\":\"Baie\",\"CAPE\":\"Cap\",\"BCH\":\"Plage\",\"SHL\":\"Haut-fond\",\"ISL\":\"Île\",\"CLF\":\"Escarpement\",\"MTN\":\"Montagne\",\"VALL\":\"Vallée\",\"PLN\":\"Plaine\",\"CAVE\":\"Caverne\",\"CRAT\":\"Cratère\",\"GLAC\":\"Glacier\",\"FOR\":\"Forêt\",\"VEGL\":\"Végétation basse\",\"MISC\":\"Divers\",\"RAIL\":\"Entité ferroviaire\",\"ROAD\":\"Entité routière\",\"AIR\":\"Entité de navigation aérienne\",\"MAR\":\"Entité de navigation maritime\",\"HYDR\":\"Construction hydraulique\",\"RECR\":\"Site récréationnel\",\"RES\":\"Site de ressources naturelles\",\"CAMP\":\"Camp-Divers\",\"SITE\":\"Site-Divers\"}}\n\n/***/ }),\n\n/***/ 97:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.isFSAResult = isFSAResult;\nexports.isNTSResult = isNTSResult;\nfunction isFSAResult(result) {\n    return !!result.fsa;\n}\nfunction isNTSResult(result) {\n    return !!result.nts;\n}\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// geosearch.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 90);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap afa6404d9c7bb2132f27","import Query from './query';\r\nimport Provinces from './provinces';\r\nimport Types from './types';\r\nimport * as defs from './definitions';\r\nconst GEO_LOCATE_URL = 'https://geogratis.gc.ca/services/geolocation/${language}/locate';\r\nconst GEO_NAMES_URL = 'https://geogratis.gc.ca/services/geoname/${language}/geonames.json';\r\nlet lastQuery;\r\nexport class GeoSearch {\r\n    constructor(uConfig) {\r\n        uConfig = uConfig ? uConfig : {};\r\n        const language = uConfig.language ? uConfig.language : 'en';\r\n        // set default URLS if none provided and search/replace language in string (if exists)\r\n        let geoLocateUrl = uConfig.geoLocateUrl ? uConfig.geoLocateUrl : GEO_LOCATE_URL;\r\n        let geoNameUrl = uConfig.geoNameUrl ? uConfig.geoNameUrl : GEO_NAMES_URL;\r\n        geoLocateUrl = geoLocateUrl.replace('${language}', language);\r\n        geoNameUrl = geoNameUrl.replace('${language}', language);\r\n        this.config = {\r\n            language: language,\r\n            types: Types(language),\r\n            provinces: Provinces(language),\r\n            maxResults: uConfig.maxResults ? uConfig.maxResults : 100,\r\n            geoNameUrl: geoNameUrl,\r\n            geoLocateUrl: geoLocateUrl\r\n        };\r\n        this.config.types.filterValidTypes(uConfig.includeTypes, uConfig.excludeTypes);\r\n    }\r\n    ui(resultHandler, featureHandler, input, resultContainer, featureContainer) {\r\n        // bind scope of provided iterator to this class, or set to internal resultIterator implementation for default behaviour\r\n        this.resultHandler = resultHandler ? resultHandler.bind(this) : this.defaultResultHandler;\r\n        this.featureHandler = featureHandler ? featureHandler.bind(this) : this.defaultFeatureHandler;\r\n        this.docFrag = document.createDocumentFragment();\r\n        if (!input) {\r\n            input = document.createElement('input');\r\n            this.docFrag.appendChild(input);\r\n        }\r\n        input.onkeyup = this.inputChanged.bind(this);\r\n        if (!featureContainer) {\r\n            this.featureContainer = document.createElement('div');\r\n            this.docFrag.appendChild(this.featureContainer);\r\n        }\r\n        else {\r\n            this.featureContainer = featureContainer;\r\n        }\r\n        if (!resultContainer) {\r\n            this.resultContainer = document.createElement('div');\r\n            this.docFrag.appendChild(this.resultContainer);\r\n        }\r\n        else {\r\n            this.resultContainer = resultContainer;\r\n        }\r\n        this.resultContainer.classList.add('geosearch-ui');\r\n        this.featureContainer.classList.add('geosearch-ui');\r\n        return this;\r\n    }\r\n    defaultResultHandler(results) {\r\n        const ul = document.createElement('ul');\r\n        results.reverse().forEach(r => {\r\n            const li = document.createElement('li');\r\n            li.innerHTML = `${r.name} (${r.type})${r.location ? ', ' + r.location : ''}, ${r.province} @ lat: ${r.latLon.lat}, lon: ${r.latLon.lon}`;\r\n            ul.appendChild(li);\r\n        });\r\n        return ul;\r\n    }\r\n    defaultFeatureHandler(fR) {\r\n        let output;\r\n        if (defs.isFSAResult(fR)) {\r\n            output = `${fR.fsa} - FSA located in ${fR.province} @ lat: ${fR.latLon.lat}, lon: ${fR.latLon.lon}`;\r\n        }\r\n        else {\r\n            output = `${fR.nts} - NTS located in ${fR.location} @ lat: ${fR.latLon.lat}, lon: ${fR.latLon.lon}`;\r\n        }\r\n        const p = document.createElement('p');\r\n        p.innerHTML = output;\r\n        return p;\r\n    }\r\n    inputChanged(evt) {\r\n        const qValue = evt.target.value;\r\n        if (qValue.length > 2 && qValue !== lastQuery) {\r\n            lastQuery = qValue;\r\n            while (this.resultContainer.firstChild) {\r\n                this.resultContainer.removeChild(this.resultContainer.firstChild);\r\n            }\r\n            while (this.featureContainer.firstChild) {\r\n                this.featureContainer.removeChild(this.featureContainer.firstChild);\r\n            }\r\n            this.query(qValue).onComplete.then(q => {\r\n                if (q.featureResults) {\r\n                    this.featureContainer.appendChild(this.featureHandler(q.featureResults));\r\n                }\r\n                this.resultContainer.appendChild(this.resultHandler(q.results));\r\n            }).catch(err => {\r\n                const p = document.createElement('p');\r\n                p.innerHTML = err;\r\n                this.resultContainer.appendChild(p);\r\n            });\r\n        }\r\n    }\r\n    get htmlElem() {\r\n        return this.docFrag;\r\n    }\r\n    query(query) {\r\n        return Query(this.config, query);\r\n    }\r\n}\r\nif (window) {\r\n    window.GeoSearch = GeoSearch;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","export default function (config, query) {\r\n    // FSA test\r\n    if (/^[ABCEGHJKLMNPRSTVXY]\\d[A-Z]/.test(query)) {\r\n        return new FSAQuery(config, query);\r\n        // Partial NTS match (Sheet and Map Unit Subdivision)\r\n    }\r\n    else if (/^\\d{2,3}[A-P]/.test(query)) {\r\n        query = query.substring(0, 6).toUpperCase();\r\n        return new NTSQuery(config, query);\r\n        // name based search\r\n    }\r\n    else if (/^[A-Za-z]/.test(query)) {\r\n        const q = new Query(config, query);\r\n        q.onComplete = q.search().then(results => {\r\n            q.results = results;\r\n            return q;\r\n        });\r\n        return q;\r\n        // posible street address search (not supported) or contains special characters\r\n    }\r\n    else {\r\n        const q = new Query(config, query);\r\n        q.onComplete = new Promise(r => r(q));\r\n        return q;\r\n    }\r\n}\r\nexport class Query {\r\n    constructor(config, query) {\r\n        this.suggestions = [];\r\n        this.results = [];\r\n        this.query = query || null;\r\n        this.config = config;\r\n    }\r\n    getUrl(useLocate, restrict, altQuery, lat, lon) {\r\n        let url = '';\r\n        let query = altQuery ? altQuery : this.query;\r\n        if (useLocate) {\r\n            url = this.config.geoLocateUrl + '?q=' + query;\r\n        }\r\n        else if (lat && lon) {\r\n            url = `${this.config.geoNameUrl}?lat=${lat}&lon=${lon}&num=${this.config.maxResults}`;\r\n        }\r\n        else {\r\n            url = `${this.config.geoNameUrl}?q=${query}&num=${this.config.maxResults}`;\r\n        }\r\n        if (restrict) {\r\n            if (restrict.length === 4) {\r\n                url += `&bbox=${restrict.join(',')}`;\r\n            }\r\n            else {\r\n                url += `&province=${restrict.join(',')}`;\r\n            }\r\n        }\r\n        return url;\r\n    }\r\n    normalizeNameItems(items) {\r\n        return items.filter(i => this.config.types.validTypes[i.concise.code]).map(i => {\r\n            return {\r\n                name: i.name,\r\n                location: i.location,\r\n                province: this.config.provinces.list[i.province.code],\r\n                type: this.config.types.allTypes[i.concise.code],\r\n                latLon: { lat: i.latitude, lon: i.longitude },\r\n                bbox: i.bbox\r\n            };\r\n        });\r\n    }\r\n    search(restrict) {\r\n        return this.jsonRequest(this.getUrl(false, restrict)).then(r => this.normalizeNameItems(r.items));\r\n    }\r\n    nameByLatLon(lat, lon, restrict) {\r\n        return this.jsonRequest(this.getUrl(false, restrict, undefined, lat, lon)).then(r => this.normalizeNameItems(r.items));\r\n    }\r\n    locateByQuery(altQuery) {\r\n        return this.jsonRequest(this.getUrl(true, undefined, altQuery));\r\n    }\r\n    jsonRequest(url) {\r\n        return new Promise((resolve, reject) => {\r\n            const xobj = new XMLHttpRequest();\r\n            xobj.open('GET', url, true);\r\n            xobj.responseType = 'json';\r\n            xobj.onload = function () {\r\n                if (xobj.status === 200) {\r\n                    resolve(typeof xobj.response === 'string' ? JSON.parse(xobj.response) : xobj.response);\r\n                }\r\n                else {\r\n                    reject('Could not load results from remote service.');\r\n                }\r\n            };\r\n            xobj.send();\r\n        });\r\n    }\r\n}\r\n/**\r\n * National Topographic System (NTS)\r\n *\r\n * The following definitions have the form \"name (value constraints) - description\"\r\n *\r\n * Sheet (two or three digits)      - aka \"Map Numbers\" are blocks of approximately 4,915,200 hectares.\r\n * Map Units Subdivision ([A-P])    - each sheet is subdivided further into 16 blocks, approximately 307,200 hectares\r\n * Map Sheet Unit ([1-16])          - each map unit is subdivided further into 16 blocks, approximately 19,200 hectares\r\n * Blocks ([A-L])                   - each map sheet unit is subdivided further into 12 blocks, approximately 1600 hectares\r\n * Units ([1-100]*)                 - each block is finally divided into 100 units, approximately 64 hectares\r\n *\r\n * Two subsets of the complete NTS format is supported:\r\n *     - Sheet and Map Unit Subdivision\r\n *     - Sheet, Map Unit Subdivision, and Map Sheet Unit\r\n *\r\n * Note that \"Blocks\" and \"Units\" are currently not supported on geogratis and are ignored on the query.\r\n*/\r\nclass NTSQuery extends Query {\r\n    constructor(config, query) {\r\n        // front pad 0 if NTS starts with two digits\r\n        query = !parseInt(query[2]) ? '0' + query : query;\r\n        super(config, query);\r\n        this.unitName = query;\r\n        this.onComplete = new Promise((resolve, reject) => {\r\n            this.locateByQuery().then(lr => {\r\n                // query check added since it can be null but will never be in this case (make TS happy)\r\n                if (lr.length > 0 && this.query) {\r\n                    const allSheets = this.locateToResult(lr);\r\n                    this.unit = allSheets.splice(allSheets.findIndex(x => x.nts === this.query), 1)[0];\r\n                    this.mapSheets = allSheets;\r\n                    this.featureResults = this.unit;\r\n                    this.nameByLatLon(this.unit.latLon.lat, this.unit.latLon.lon).then(r => {\r\n                        this.results = r;\r\n                        resolve(this);\r\n                    });\r\n                }\r\n                else {\r\n                    reject('Not found');\r\n                }\r\n            });\r\n        });\r\n    }\r\n    locateToResult(lrl) {\r\n        const results = lrl.map(ls => {\r\n            const title = ls.title.split(' ');\r\n            return {\r\n                nts: title.shift() || '',\r\n                location: title.join(' '),\r\n                code: 'NTS',\r\n                desc: this.config.types.allTypes['NTS'],\r\n                latLon: { lat: ls.geometry.coordinates[1], lon: ls.geometry.coordinates[0] },\r\n                bbox: ls.bbox\r\n            };\r\n        });\r\n        return results;\r\n    }\r\n    equals(otherQ) {\r\n        return this.unitName === otherQ.unitName;\r\n    }\r\n}\r\nclass FSAQuery extends Query {\r\n    constructor(config, query) {\r\n        query = query.substring(0, 3).toUpperCase();\r\n        super(config, query);\r\n        this.onComplete = new Promise((resolve, reject) => {\r\n            this.formatLocationResult().then(fLR => {\r\n                if (fLR !== null) {\r\n                    this.featureResults = fLR;\r\n                    this.nameByLatLon(fLR.latLon.lat, fLR.latLon.lon, Object.keys(fLR._provinces).map(x => parseInt(x))).then(r => {\r\n                        this.results = r;\r\n                        resolve(this);\r\n                    });\r\n                }\r\n                else {\r\n                    reject('FSA code given cannot be found.');\r\n                }\r\n            });\r\n        });\r\n    }\r\n    formatLocationResult() {\r\n        return this.locateByQuery().then(locateResponseList => {\r\n            // query check added since it can be null but will never be in this case (make TS happy)\r\n            if (locateResponseList.length === 1 && this.query) {\r\n                const provList = this.config.provinces.fsaToProvinces(this.query);\r\n                return {\r\n                    fsa: this.query,\r\n                    code: 'FSA',\r\n                    desc: this.config.types.allTypes['FSA'],\r\n                    province: Object.keys(provList).map(i => provList[i]).join(','),\r\n                    _provinces: provList,\r\n                    latLon: { lat: locateResponseList[0].geometry.coordinates[1], lon: locateResponseList[0].geometry.coordinates[0] }\r\n                };\r\n            }\r\n            return null;\r\n        });\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/query.ts","import * as provs from '../data/provinces.json';\r\nimport * as fsaToProv from '../data/fsa_to_prov.json';\r\nconst provinceObj = {};\r\nclass Provinces {\r\n    constructor(language) {\r\n        this.list = {};\r\n        Object.keys(provs[language]).forEach(provKey => {\r\n            this.list[provKey] = provs[language][provKey];\r\n        });\r\n    }\r\n    fsaToProvinces(fsa) {\r\n        const genericObj = {};\r\n        // either a provincial code, or an array of them\r\n        let provCodes = fsaToProv[fsa.substring(0, 1).toUpperCase()];\r\n        if (typeof provCodes === 'number') {\r\n            provCodes = [provCodes];\r\n        }\r\n        provCodes.forEach(n => {\r\n            genericObj[n] = this.list[n];\r\n        });\r\n        return genericObj;\r\n    }\r\n}\r\nexport default function (language) {\r\n    return provinceObj[language] = provinceObj[language] ? provinceObj[language] : new Provinces(language);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/provinces.ts","module.exports = {\"en\":{\"10\":\"Newfoundland and Labrador\",\"11\":\"Prince Edward Island\",\"12\":\"Nova Scotia\",\"13\":\"New Brunswick\",\"24\":\"Quebec\",\"35\":\"Ontario\",\"46\":\"Manitoba\",\"47\":\"Saskatchewan\",\"48\":\"Alberta\",\"59\":\"British Columbia\",\"60\":\"Yukon\",\"61\":\"Northwest Territories\",\"62\":\"Nunavut\",\"72\":\"Undersea Feature\",\"73\":\"International Waters\"},\"fr\":{\"10\":\"Terre-Neuve-et-Labrador\",\"11\":\"Île-du-Prince-Édouard\",\"12\":\"Nouvelle-Écosse\",\"13\":\"Nouveau-Brunswick\",\"24\":\"Québec\",\"35\":\"Ontario\",\"46\":\"Manitoba\",\"47\":\"Saskatchewan\",\"48\":\"Alberta\",\"59\":\"Colombie-Britannique\",\"60\":\"Yukon\",\"61\":\"Territoires du Nord-Ouest\",\"62\":\"Nunavut\",\"72\":\"Entité sous-marine\",\"73\":\"Eaux internationales\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./data/provinces.json\n// module id = 93\n// module chunks = 0 1","module.exports = {\"A\":10,\"B\":12,\"C\":11,\"E\":13,\"G\":24,\"H\":24,\"J\":24,\"K\":35,\"L\":35,\"M\":35,\"N\":35,\"P\":35,\"R\":46,\"S\":47,\"T\":48,\"V\":59,\"X\":[62,61],\"Y\":60}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./data/fsa_to_prov.json\n// module id = 94\n// module chunks = 0 1","import * as types from '../data/types.json';\r\nconst typeObj = {};\r\nclass Types {\r\n    constructor(language) {\r\n        this.allTypes = {};\r\n        this.validTypes = {};\r\n        this.filterComplete = false;\r\n        Object.keys(types[language]).forEach(typeKey => {\r\n            this.allTypes[typeKey] = types[language][typeKey];\r\n            this.validTypes[typeKey] = types[language][typeKey];\r\n        });\r\n    }\r\n    filterValidTypes(include, exclude) {\r\n        if (this.filterComplete) {\r\n            return this.validTypes;\r\n        }\r\n        include = typeof include === 'string' ? [include] : include;\r\n        exclude = typeof exclude === 'string' ? [exclude] : exclude;\r\n        const setExclusion = include || exclude ? (include && include.length > 0) || (exclude && exclude.length) : null;\r\n        if (setExclusion !== null) {\r\n            const typeSet = new Set(Object.keys(this.validTypes));\r\n            const keySet = new Set(include || exclude);\r\n            const invalidKeys = new Set([...typeSet].filter(x => !setExclusion === keySet.has(x)));\r\n            for (let key of invalidKeys) {\r\n                delete this.validTypes[key];\r\n            }\r\n        }\r\n        this.filterComplete = true;\r\n        return this.validTypes;\r\n    }\r\n}\r\nexport default function (language) {\r\n    return typeObj[language] = typeObj[language] ? typeObj[language] : new Types(language);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/types.ts","module.exports = {\"en\":{\"FSA\":\"Forward Sortation Area\",\"NTS\":\"National Topographic System\",\"PROV\":\"Province\",\"TERR\":\"Territory\",\"CITY\":\"City\",\"TOWN\":\"Town\",\"VILG\":\"Village\",\"HAM\":\"Hamlet\",\"UTM\":\"Upper Tier Municipality\",\"LTM\":\"Lower Tier Municipality\",\"STM\":\"Single Tier Municipality\",\"MUN1\":\"Other Municipal-District Area-Major Agglom.\",\"MUN2\":\"Other Municipal-District Area-Miscellaneous\",\"UNP\":\"Unincorporated place\",\"IR\":\"Indian Reserve\",\"GEOG\":\"Geographical Area\",\"PARK\":\"Conservation Area\",\"MIL\":\"Military Area\",\"RIV\":\"River\",\"RIVF\":\"River Feature\",\"FALL\":\"Falls\",\"LAKE\":\"Lake\",\"SPRG\":\"Spring\",\"SEA\":\"Sea\",\"SEAF\":\"Sea Feature\",\"SEAU\":\"Undersea Feature\",\"CHAN\":\"Channel\",\"RAP\":\"Rapids\",\"BAY\":\"Bay\",\"CAPE\":\"Cape\",\"BCH\":\"Beach\",\"SHL\":\"Shoal\",\"ISL\":\"Island\",\"CLF\":\"Cliff\",\"MTN\":\"Mountain\",\"VALL\":\"Valley\",\"PLN\":\"Plain\",\"CAVE\":\"Cave\",\"CRAT\":\"Crater\",\"GLAC\":\"Glacier\",\"FOR\":\"Forest\",\"VEGL\":\"Low Vegetation\",\"MISC\":\"Miscellaneous\",\"RAIL\":\"Railway Feature\",\"ROAD\":\"Road Feature\",\"AIR\":\"Air Navigation Feature\",\"MAR\":\"Marine Navigation Feature\",\"HYDR\":\"Hydraulic Construction\",\"RECR\":\"Recreational Site\",\"RES\":\"Natural Resources Site\",\"CAMP\":\"Miscellaneous Campsite\",\"SITE\":\"Miscellaneous Site\"},\"fr\":{\"FSA\":\"Région De Tri D'Acheminement\",\"NTS\":\"Système National De Référence Cartographique\",\"PROV\":\"Province\",\"TERR\":\"Territoire\",\"CITY\":\"Ville\",\"TOWN\":\"Ville\",\"VILG\":\"Village\",\"HAM\":\"Hameau\",\"UTM\":\"Municipalité de palier supérieure\",\"LTM\":\"Municipalité de palier inférieur\",\"STM\":\"Municipalité de palier simple\",\"MUN1\":\"Autre zone municip.-District-Agglom. majeure\",\"MUN2\":\"Autre zone municipale-District-Divers\",\"UNP\":\"Lieu non organisé\",\"IR\":\"Réserve indienne\",\"GEOG\":\"Zone géographique\",\"PARK\":\"Zone de préservation\",\"MIL\":\"Réserve militaire\",\"RIV\":\"Cours d'eau\",\"RIVF\":\"Entité fluviale\",\"FALL\":\"Chute\",\"LAKE\":\"Lac\",\"SPRG\":\"Source\",\"SEA\":\"Mer\",\"SEAF\":\"Entité maritime\",\"SEAU\":\"Entité sous-marine\",\"CHAN\":\"Chenal\",\"RAP\":\"Rapide\",\"BAY\":\"Baie\",\"CAPE\":\"Cap\",\"BCH\":\"Plage\",\"SHL\":\"Haut-fond\",\"ISL\":\"Île\",\"CLF\":\"Escarpement\",\"MTN\":\"Montagne\",\"VALL\":\"Vallée\",\"PLN\":\"Plaine\",\"CAVE\":\"Caverne\",\"CRAT\":\"Cratère\",\"GLAC\":\"Glacier\",\"FOR\":\"Forêt\",\"VEGL\":\"Végétation basse\",\"MISC\":\"Divers\",\"RAIL\":\"Entité ferroviaire\",\"ROAD\":\"Entité routière\",\"AIR\":\"Entité de navigation aérienne\",\"MAR\":\"Entité de navigation maritime\",\"HYDR\":\"Construction hydraulique\",\"RECR\":\"Site récréationnel\",\"RES\":\"Site de ressources naturelles\",\"CAMP\":\"Camp-Divers\",\"SITE\":\"Site-Divers\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./data/types.json\n// module id = 96\n// module chunks = 0 1","export function isFSAResult(result) {\r\n    return !!result.fsa;\r\n}\r\nexport function isNTSResult(result) {\r\n    return !!result.nts;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/definitions.ts"],"sourceRoot":""}