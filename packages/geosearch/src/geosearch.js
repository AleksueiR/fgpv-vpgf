!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e){e.exports={en:{10:"Newfoundland and Labrador",11:"Prince Edward Island",12:"Nova Scotia",13:"New Brunswick",24:"Quebec",35:"Ontario",46:"Manitoba",47:"Saskatchewan",48:"Alberta",59:"British Columbia",60:"Yukon",61:"Northwest Territories",62:"Nunavut",72:"Undersea Feature",73:"International Waters"},fr:{10:"Terre-Neuve-et-Labrador",11:"Île-du-Prince-Édouard",12:"Nouvelle-Écosse",13:"Nouveau-Brunswick",24:"Québec",35:"Ontario",46:"Manitoba",47:"Saskatchewan",48:"Alberta",59:"Colombie-Britannique",60:"Yukon",61:"Territoires du Nord-Ouest",62:"Nunavut",72:"Entité sous-marine",73:"Eaux internationales"}}},function(e){e.exports={A:10,B:12,C:11,E:13,G:24,H:24,J:24,K:35,L:35,M:35,N:35,P:35,R:46,S:47,T:48,V:59,X:[62,61],Y:60}},function(e){e.exports={en:{FSA:"Forward Sortation Area",NTS:"National Topographic System",COORD:"Latitude/Longitude",SCALE:"Scale",PROV:"Province",TERR:"Territory",CITY:"City",TOWN:"Town",VILG:"Village",HAM:"Hamlet",UTM:"Upper Tier Municipality",LTM:"Lower Tier Municipality",STM:"Single Tier Municipality",MUN1:"Other Municipal-District Area-Major Agglom.",MUN2:"Other Municipal-District Area-Miscellaneous",UNP:"Unincorporated place",IR:"Indian Reserve",GEOG:"Geographical Area",PARK:"Conservation Area",MIL:"Military Area",RIV:"River",RIVF:"River Feature",FALL:"Falls",LAKE:"Lake",SPRG:"Spring",SEA:"Sea",SEAF:"Sea Feature",SEAU:"Undersea Feature",CHAN:"Channel",RAP:"Rapids",BAY:"Bay",CAPE:"Cape",BCH:"Beach",SHL:"Shoal",ISL:"Island",CLF:"Cliff",MTN:"Mountain",VALL:"Valley",PLN:"Plain",CAVE:"Cave",CRAT:"Crater",GLAC:"Glacier",FOR:"Forest",VEGL:"Low Vegetation",MISC:"Miscellaneous",RAIL:"Railway Feature",ROAD:"Road Feature",AIR:"Air Navigation Feature",MAR:"Marine Navigation Feature",HYDR:"Hydraulic Construction",RECR:"Recreational Site",RES:"Natural Resources Site",CAMP:"Miscellaneous Campsite",SITE:"Miscellaneous Site"},fr:{FSA:"Région De Tri D'Acheminement",NTS:"Système National De Référence Cartographique",COORD:"Latitude/Longitude",SCALE:"Échelle",PROV:"Province",TERR:"Territoire",CITY:"Ville",TOWN:"Ville",VILG:"Village",HAM:"Hameau",UTM:"Municipalité de palier supérieure",LTM:"Municipalité de palier inférieur",STM:"Municipalité de palier simple",MUN1:"Autre zone municip.-District-Agglom. majeure",MUN2:"Autre zone municipale-District-Divers",UNP:"Lieu non organisé",IR:"Réserve indienne",GEOG:"Zone géographique",PARK:"Zone de préservation",MIL:"Réserve militaire",RIV:"Cours d'eau",RIVF:"Entité fluviale",FALL:"Chute",LAKE:"Lac",SPRG:"Source",SEA:"Mer",SEAF:"Entité maritime",SEAU:"Entité sous-marine",CHAN:"Chenal",RAP:"Rapide",BAY:"Baie",CAPE:"Cap",BCH:"Plage",SHL:"Haut-fond",ISL:"Île",CLF:"Escarpement",MTN:"Montagne",VALL:"Vallée",PLN:"Plaine",CAVE:"Caverne",CRAT:"Cratère",GLAC:"Glacier",FOR:"Forêt",VEGL:"Végétation basse",MISC:"Divers",RAIL:"Entité ferroviaire",ROAD:"Entité routière",AIR:"Entité de navigation aérienne",MAR:"Entité de navigation maritime",HYDR:"Construction hydraulique",RECR:"Site récréationnel",RES:"Site de ressources naturelles",CAMP:"Camp-Divers",SITE:"Site-Divers"}}},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"make",(function(){return u})),n.d(r,"Query",(function(){return s})),n.d(r,"NTSQuery",(function(){return l})),n.d(r,"FSAQuery",(function(){return c})),n.d(r,"LatLongQuery",(function(){return f}));var i={};n.r(i),n.d(i,"isFSAResult",(function(){return T})),n.d(i,"isNTSResult",(function(){return b}));var o,a=(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function u(e,t){if(t=t.slice(0,-1),/^[ABCEGHJKLMNPRSTVXY]\d[A-Z]/.test(t))return new c(e,t);if(/^\d{2,3}[A-P]/.test(t))return t=t.substring(0,6).toUpperCase(),new l(e,t);if(/^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?)(\s*[,|;\s]\s*)[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)[*]$/.test(t))return new f(e,t,"dd");if(/^[-+]?([0-8]?\d|90)\s*([0-5]?\d)\s*([0-5]?\d)\s*[,|;\s]\s*[-+]?(\d{2}|1[0-7]\d|180)\s*([0-5]?\d)\s*([0-5]?\d)[*]$/.test(t))return new f(e,t,"dms");if(/^[A-Za-z]/.test(t)){var n=new s(e,t);return n.onComplete=n.search().then((function(e){return n.results=e,n})),n}if(/^[1][:]\d{1,3}[ ]*\d{1,3}[ ]*\d{1,3}[*]$/.test(t)){var r=new s(e,t);return r.onComplete=r.search().then((function(e){return r.scale=[{name:t,type:{name:r.config.types.validTypes.SCALE,code:"SCALE"}}],r})),r}var i=new s(e,t);return i.onComplete=new Promise((function(e,t){return e(i)})),i}var s=function(){function e(e,t){this.suggestions=[],this.results=[],this.query=t,this.config=e}return e.prototype.getUrl=function(e,t,n,r,i){var o="",a=n||this.query;return o=e?this.config.geoLocateUrl+"?q="+a:r&&i?this.config.geoNameUrl+"?lat="+r+"&lon="+i+"&num="+this.config.maxResults:this.config.geoNameUrl+"?q="+a+"&num="+this.config.maxResults,t&&(4===t.length?o+="&bbox="+t.join(","):o+="&province="+t.join(",")),o},e.prototype.normalizeNameItems=function(e){var t=this;return e.filter((function(e){return t.config.types.validTypes[e.concise.code]})).map((function(e){return{name:e.name,location:e.location,province:t.config.provinces.list[e.province.code],type:t.config.types.allTypes[e.concise.code],LatLon:{lat:e.latitude,lon:e.longitude},bbox:e.bbox}}))},e.prototype.search=function(e){var t=this;return this.jsonRequest(this.getUrl(!1,e)).then((function(e){return t.normalizeNameItems(e.items)}))},e.prototype.nameByLatLon=function(e,t,n){var r=this;return this.jsonRequest(this.getUrl(!1,n,void 0,e,t)).then((function(e){return r.normalizeNameItems(e.items)}))},e.prototype.locateByQuery=function(e){return this.jsonRequest(this.getUrl(!0,void 0,e))},e.prototype.jsonRequest=function(e){return new Promise((function(t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="json",r.onload=function(){200===r.status?t("string"==typeof r.response?JSON.parse(r.response):r.response):n("Could not load results from remote service.")},r.send()}))},e}(),l=function(e){function t(t,n){var r=this;return n=isNaN(parseInt(n[2]))?"0"+n:n,(r=e.call(this,t,n)||this).unitName=n,r.onComplete=new Promise((function(e,t){r.locateByQuery().then((function(n){if(n.length>0&&r.query){var i=r.locateToResult(n);r.unit=i[0],r.mapSheets=i,r.featureResults=r.unit,r.nameByLatLon(r.unit.LatLon.lat,r.unit.LatLon.lon).then((function(t){r.results=t,e(r)}))}else t("Not found")}))})),r}return a(t,e),t.prototype.locateToResult=function(e){var t=this;return e.map((function(e){var n=e.title.split(" ");return{nts:n.shift()||"",location:n.join(" "),code:"NTS",desc:t.config.types.allTypes.NTS,LatLon:{lat:e.geometry.coordinates[1],lon:e.geometry.coordinates[0]},bbox:e.bbox}}))},t.prototype.equals=function(e){return this.unitName===e.unitName},t}(s),c=function(e){function t(t,n){var r=this;return n=n.substring(0,3).toUpperCase(),(r=e.call(this,t,n)||this).onComplete=new Promise((function(e,t){r.formatLocationResult().then((function(n){n?(r.featureResults=n,r.nameByLatLon(n.LatLon.lat,n.LatLon.lon,Object.keys(n._provinces).map((function(e){return parseInt(e)}))).then((function(t){r.results=t,e(r)}))):t("FSA code given cannot be found.")}))})),r}return a(t,e),t.prototype.formatLocationResult=function(){var e=this;return this.locateByQuery().then((function(t){if(1===t.length&&e.query){var n=e.config.provinces.fsaToProvinces(e.query);return{fsa:e.query,code:"FSA",desc:e.config.types.allTypes.FSA,province:Object.keys(n).map((function(e){return n[e]})).join(","),_provinces:n,LatLon:{lat:t[0].geometry.coordinates[1],lon:t[0].geometry.coordinates[0]}}}}))},t}(s),f=function(e){function t(t,n,r){var i,o=e.call(this,t,n)||this,a=n.split(/[\s|,|;|]/).filter((function(e){return!isNaN(e)&&""!==e})).map((function(e){return parseFloat(e)}));if("dms"===r){var u=Math.abs(a[0])+a[1]/60+a[2]/3600,s=Math.abs(a[3])+a[4]/60+a[5]/3600;u=a[0]>0?u:-1*u,s=a[3]>0?s:-1*s,i=[u,s]}else i=a;var l=[i[1]-.015,i[0]-.015,i[1]+.015,i[0]+.015];return o.latLongResult={name:i[0]+","+i[1],location:{latitude:i[0],longitude:i[1]},type:{name:"Latitude/Longitude",code:"COORD"},position:[i[0],i[1]],bbox:l},o.onComplete=new Promise((function(e,t){o.nameByLatLon(i[0],i[1]).then((function(t){o.results=t,e(o)}))})),o}return a(t,e),t}(s),p=n(0),d=n(1),h={},m=d,g=p,y=function(){function e(e){var t=this;this.list={},Object.keys(g[e]).forEach((function(n){t.list[n]=g[e][n]}))}return e.prototype.fsaToProvinces=function(e){var t=this,n={},r=m[e.substring(0,1).toUpperCase()];return"number"==typeof r&&(r=[r]),r.forEach((function(e){n[e]=t.list[e]})),n},e}(),v=function(e){return h[e]=h[e]?h[e]:new y(e)},L=n(2),C={},R=L,A=function(){function e(e){var t=this;this.allTypes={},this.validTypes={},this.filterComplete=!1,Object.keys(R[e]).forEach((function(n){t.allTypes[n]=R[e][n],t.validTypes[n]=R[e][n]}))}return e.prototype.filterValidTypes=function(e){if(this.filterComplete)return this.validTypes;if((e="string"==typeof e?[e]:e)&&e.length>0)for(var t=0,n=e;t<n.length;t++){var r=n[t];delete this.validTypes[r]}return this.filterComplete=!0,this.validTypes},e}(),S=function(e){return C[e]=C[e]?C[e]:new A(e)};function T(e){return!!e.fsa}function b(e){return!!e.nts}n.d(t,"GeoSearch",(function(){return P})),n.d(t,"Q",(function(){return r})),n.d(t,"Provinces",(function(){return v})),n.d(t,"Types",(function(){return S})),n.d(t,"Defs",(function(){return i}));var N,E="https://geogratis.gc.ca/services/geolocation/@{language}/locate",M="https://geogratis.gc.ca/services/geoname/@{language}/geonames.json",P=function(){function e(e){var t=(e=e||{}).language?e.language:"en",n=e.geoLocateUrl?e.geoLocateUrl:E,r=e.geoNameUrl?e.geoNameUrl:M;n=n.replace("@{language}",t),r=r.replace("@{language}",t),this.config={language:t,types:S(t),provinces:v(t),maxResults:e.maxResults?e.maxResults:100,geoNameUrl:r,geoLocateUrl:n},this.config.types.filterValidTypes(e.excludeTypes)}return e.prototype.ui=function(e,t,n,r,i){return this.resultHandler=e?e.bind(this):this.defaultResultHandler,this.featureHandler=t?t.bind(this):this.defaultFeatureHandler,this.docFrag=document.createDocumentFragment(),n||(n=document.createElement("input"),this.docFrag.appendChild(n)),n.onkeyup=this.inputChanged.bind(this),i?this.featureContainer=i:(this.featureContainer=document.createElement("div"),this.docFrag.appendChild(this.featureContainer)),r?this.resultContainer=r:(this.resultContainer=document.createElement("div"),this.docFrag.appendChild(this.resultContainer)),this.resultContainer.classList.add("geosearch-ui"),this.featureContainer.classList.add("geosearch-ui"),this},e.prototype.defaultResultHandler=function(e){var t=document.createElement("ul");return e.reverse().forEach((function(e){var n=document.createElement("li");n.innerHTML=e.name+" ("+e.type+")"+(e.location?", "+e.location:"")+", "+e.province+" @ lat: "+e.LatLon.lat+", lon: "+e.LatLon.lon,t.appendChild(n)})),t},e.prototype.defaultFeatureHandler=function(e){var t;t=T(e)?e.fsa+" - FSA located in "+e.province+" @ lat: "+e.LatLon.lat+", lon: "+e.LatLon.lon:b(e)?e.nts+" - NTS located in "+e.location+" @ lat: "+e.LatLon.lat+", lon: "+e.LatLon.lon:"lat: "+e.LatLon.lat+", lon: "+e.LatLon.lon;var n=document.createElement("p");return n.innerHTML=t,n},e.prototype.inputChanged=function(e){var t=this,n=e.target.value;if(n.length>2&&n!==N){for(N=n;this.resultContainer.firstChild;)this.resultContainer.removeChild(this.resultContainer.firstChild);for(;this.featureContainer.firstChild;)this.featureContainer.removeChild(this.featureContainer.firstChild);this.query(n).onComplete.then((function(e){e.featureResults&&t.featureContainer.appendChild(t.featureHandler(e.featureResults)),t.resultContainer.appendChild(t.resultHandler(e.results))})).catch((function(e){var n=document.createElement("p");n.innerHTML=e,t.resultContainer.appendChild(n)}))}},Object.defineProperty(e.prototype,"htmlElem",{get:function(){return this.docFrag},enumerable:!0,configurable:!0}),e.prototype.query=function(e){return u(this.config,e)},e}();window&&(window.GeoSearch=P)}]);