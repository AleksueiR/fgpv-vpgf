{"version":3,"sources":["webpack:///geosearch.js","webpack:///webpack/bootstrap 71db2e2eeddc7787575f","webpack:///./src/index.ts","webpack:///./src/query.ts","webpack:///./src/provinces.ts","webpack:///./data/provinces.json","webpack:///./data/fsa_to_prov.json","webpack:///./src/types.ts","webpack:///./data/types.json","webpack:///./src/definitions.ts"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","90","_interopRequireDefault","obj","default","_interopRequireWildcard","newObj","key","value","GeoSearch","undefined","lastQuery","_query","Q","_provinces","_provinces2","_types","_types2","_definitions","defs","GEO_LOCATE_URL","GEO_NAMES_URL","uConfig","language","geoLocateUrl","geoNameUrl","replace","this","config","types","provinces","maxResults","filterValidTypes","includeTypes","excludeTypes","ui","resultHandler","featureHandler","input","resultContainer","featureContainer","bind","defaultResultHandler","defaultFeatureHandler","docFrag","document","createDocumentFragment","createElement","appendChild","onkeyup","inputChanged","classList","add","results","ul","reverse","forEach","r","li","innerHTML","type","location","province","LatLon","lat","lon","fR","output","isFSAResult","fsa","nts","evt","_this","qValue","target","length","firstChild","removeChild","query","onComplete","then","q","featureResults","catch","err","make","window","91","test","FSAQuery","substring","toUpperCase","NTSQuery","q_1","Query","search","q_2","Promise","resolve","reject","__extends","extendStatics","setPrototypeOf","__proto__","Array","b","__","constructor","create","suggestions","getUrl","useLocate","restrict","altQuery","url","join","normalizeNameItems","items","filter","validTypes","concise","code","map","list","allTypes","latitude","longitude","bbox","jsonRequest","nameByLatLon","locateByQuery","xobj","XMLHttpRequest","open","responseType","onload","status","response","JSON","parse","send","_super","parseInt","unitName","lr","allSheets","locateToResult","unit","splice","findIndex","x","mapSheets","lrl","ls","title","split","shift","desc","NTS","geometry","coordinates","equals","otherQ","formatLocationResult","fLR","keys","locateResponseList","provList_1","fsaToProvinces","FSA","92","provinceObj","Provinces","jsonprovs","_fsa_to_prov","jsonfsaToProv","fsaToProv","provs","provKey","genericObj","provCodes","93","en","10","11","12","13","24","35","46","47","48","59","60","61","62","72","73","fr","94","A","B","C","E","G","H","J","K","L","M","N","P","R","S","T","V","X","Y","95","typeObj","Types","jsontypes","filterComplete","typeKey","include","exclude","setExclusion","typeSet","keySet_1","invalidKeys","slice","indexOf","_i","invalidKeys_1","96","PROV","TERR","CITY","TOWN","VILG","HAM","UTM","LTM","STM","MUN1","MUN2","UNP","IR","GEOG","PARK","MIL","RIV","RIVF","FALL","LAKE","SPRG","SEA","SEAF","SEAU","CHAN","RAP","BAY","CAPE","BCH","SHL","ISL","CLF","MTN","VALL","PLN","CAVE","CRAT","GLAC","FOR","VEGL","MISC","RAIL","ROAD","AIR","MAR","HYDR","RECR","RES","CAMP","SITE","97","result","isNTSResult"],"mappings":"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","file":"geosearch.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 90);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 90:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.GeoSearch = undefined;\n\nvar _query = __webpack_require__(91);\n\nvar Q = _interopRequireWildcard(_query);\n\nvar _provinces = __webpack_require__(92);\n\nvar _provinces2 = _interopRequireDefault(_provinces);\n\nvar _types = __webpack_require__(95);\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _definitions = __webpack_require__(97);\n\nvar defs = _interopRequireWildcard(_definitions);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar GEO_LOCATE_URL = 'https://geogratis.gc.ca/services/geolocation/@{language}/locate';\nvar GEO_NAMES_URL = 'https://geogratis.gc.ca/services/geoname/@{language}/geonames.json';\nvar lastQuery;\nvar GeoSearch = /** @class */function () {\n    function GeoSearch(uConfig) {\n        uConfig = uConfig ? uConfig : {};\n        var language = uConfig.language ? uConfig.language : 'en';\n        // set default URLS if none provided and search/replace language in string (if exists)\n        var geoLocateUrl = uConfig.geoLocateUrl ? uConfig.geoLocateUrl : GEO_LOCATE_URL;\n        var geoNameUrl = uConfig.geoNameUrl ? uConfig.geoNameUrl : GEO_NAMES_URL;\n        geoLocateUrl = geoLocateUrl.replace('@{language}', language);\n        geoNameUrl = geoNameUrl.replace('@{language}', language);\n        this.config = {\n            language: language,\n            types: (0, _types2.default)(language),\n            provinces: (0, _provinces2.default)(language),\n            maxResults: uConfig.maxResults ? uConfig.maxResults : 100,\n            geoNameUrl: geoNameUrl,\n            geoLocateUrl: geoLocateUrl\n        };\n        this.config.types.filterValidTypes(uConfig.includeTypes, uConfig.excludeTypes);\n    }\n    GeoSearch.prototype.ui = function (resultHandler, featureHandler, input, resultContainer, featureContainer) {\n        // bind scope of provided iterator to this class, or set to internal resultIterator implementation for default behaviour\n        this.resultHandler = resultHandler ? resultHandler.bind(this) : this.defaultResultHandler;\n        this.featureHandler = featureHandler ? featureHandler.bind(this) : this.defaultFeatureHandler;\n        this.docFrag = document.createDocumentFragment();\n        if (!input) {\n            input = document.createElement('input');\n            this.docFrag.appendChild(input);\n        }\n        input.onkeyup = this.inputChanged.bind(this);\n        if (!featureContainer) {\n            this.featureContainer = document.createElement('div');\n            this.docFrag.appendChild(this.featureContainer);\n        } else {\n            this.featureContainer = featureContainer;\n        }\n        if (!resultContainer) {\n            this.resultContainer = document.createElement('div');\n            this.docFrag.appendChild(this.resultContainer);\n        } else {\n            this.resultContainer = resultContainer;\n        }\n        this.resultContainer.classList.add('geosearch-ui');\n        this.featureContainer.classList.add('geosearch-ui');\n        return this;\n    };\n    GeoSearch.prototype.defaultResultHandler = function (results) {\n        var ul = document.createElement('ul');\n        results.reverse().forEach(function (r) {\n            var li = document.createElement('li');\n            li.innerHTML = r.name + \" (\" + r.type + \")\" + (r.location ? ', ' + r.location : '') + \", \" + r.province + \" @ lat: \" + r.LatLon.lat + \", lon: \" + r.LatLon.lon;\n            ul.appendChild(li);\n        });\n        return ul;\n    };\n    GeoSearch.prototype.defaultFeatureHandler = function (fR) {\n        var output;\n        if (defs.isFSAResult(fR)) {\n            output = fR.fsa + \" - FSA located in \" + fR.province + \" @ lat: \" + fR.LatLon.lat + \", lon: \" + fR.LatLon.lon;\n        } else {\n            output = fR.nts + \" - NTS located in \" + fR.location + \" @ lat: \" + fR.LatLon.lat + \", lon: \" + fR.LatLon.lon;\n        }\n        var p = document.createElement('p');\n        p.innerHTML = output;\n        return p;\n    };\n    GeoSearch.prototype.inputChanged = function (evt) {\n        var _this = this;\n        var qValue = evt.target.value;\n        if (qValue.length > 2 && qValue !== lastQuery) {\n            lastQuery = qValue;\n            while (this.resultContainer.firstChild) {\n                this.resultContainer.removeChild(this.resultContainer.firstChild);\n            }\n            while (this.featureContainer.firstChild) {\n                this.featureContainer.removeChild(this.featureContainer.firstChild);\n            }\n            this.query(qValue).onComplete.then(function (q) {\n                if (q.featureResults) {\n                    _this.featureContainer.appendChild(_this.featureHandler(q.featureResults));\n                }\n                _this.resultContainer.appendChild(_this.resultHandler(q.results));\n            }).catch(function (err) {\n                var p = document.createElement('p');\n                p.innerHTML = err;\n                _this.resultContainer.appendChild(p);\n            });\n        }\n    };\n    Object.defineProperty(GeoSearch.prototype, \"htmlElem\", {\n        get: function get() {\n            return this.docFrag;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    GeoSearch.prototype.query = function (query) {\n        return Q.make(this.config, query);\n    };\n    return GeoSearch;\n}();\nexports.GeoSearch = GeoSearch;\n\nif (window) {\n    window.GeoSearch = GeoSearch;\n}\n\n/***/ }),\n\n/***/ 91:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.make = make;\nvar __extends = undefined && undefined.__extends || function () {\n    var extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n        d.__proto__ = b;\n    } || function (d, b) {\n        for (var p in b) {\n            if (b.hasOwnProperty(p)) d[p] = b[p];\n        }\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nfunction make(config, query) {\n    // FSA test\n    if (/^[ABCEGHJKLMNPRSTVXY]\\d[A-Z]/.test(query)) {\n        return new FSAQuery(config, query);\n        // Partial NTS match (Sheet and Map Unit Subdivision)\n    } else if (/^\\d{2,3}[A-P]/.test(query)) {\n        query = query.substring(0, 6).toUpperCase();\n        return new NTSQuery(config, query);\n        // name based search\n    } else if (/^[A-Za-z]/.test(query)) {\n        var q_1 = new Query(config, query);\n        q_1.onComplete = q_1.search().then(function (results) {\n            q_1.results = results;\n            return q_1;\n        });\n        return q_1;\n        // posible street address search (not supported) or contains special characters\n    } else {\n        var q_2 = new Query(config, query);\n        q_2.onComplete = new Promise(function (resolve, reject) {\n            return resolve(q_2);\n        });\n        return q_2;\n    }\n}\nvar Query = /** @class */function () {\n    function Query(config, query) {\n        this.suggestions = [];\n        this.results = [];\n        this.query = query;\n        this.config = config;\n    }\n    Query.prototype.getUrl = function (useLocate, restrict, altQuery, lat, lon) {\n        var url = '';\n        var query = altQuery ? altQuery : this.query;\n        if (useLocate) {\n            url = this.config.geoLocateUrl + '?q=' + query;\n        } else if (lat && lon) {\n            url = this.config.geoNameUrl + \"?lat=\" + lat + \"&lon=\" + lon + \"&num=\" + this.config.maxResults;\n        } else {\n            url = this.config.geoNameUrl + \"?q=\" + query + \"&num=\" + this.config.maxResults;\n        }\n        if (restrict) {\n            if (restrict.length === 4) {\n                url += \"&bbox=\" + restrict.join(',');\n            } else {\n                url += \"&province=\" + restrict.join(',');\n            }\n        }\n        return url;\n    };\n    Query.prototype.normalizeNameItems = function (items) {\n        var _this = this;\n        return items.filter(function (i) {\n            return _this.config.types.validTypes[i.concise.code];\n        }).map(function (i) {\n            return {\n                name: i.name,\n                location: i.location,\n                province: _this.config.provinces.list[i.province.code],\n                type: _this.config.types.allTypes[i.concise.code],\n                LatLon: { lat: i.latitude, lon: i.longitude },\n                bbox: i.bbox\n            };\n        });\n    };\n    Query.prototype.search = function (restrict) {\n        var _this = this;\n        return this.jsonRequest(this.getUrl(false, restrict)).then(function (r) {\n            return _this.normalizeNameItems(r.items);\n        });\n    };\n    Query.prototype.nameByLatLon = function (lat, lon, restrict) {\n        var _this = this;\n        return this.jsonRequest(this.getUrl(false, restrict, undefined, lat, lon)).then(function (r) {\n            return _this.normalizeNameItems(r.items);\n        });\n    };\n    Query.prototype.locateByQuery = function (altQuery) {\n        return this.jsonRequest(this.getUrl(true, undefined, altQuery));\n    };\n    Query.prototype.jsonRequest = function (url) {\n        return new Promise(function (resolve, reject) {\n            var xobj = new XMLHttpRequest();\n            xobj.open('GET', url, true);\n            xobj.responseType = 'json';\n            xobj.onload = function () {\n                if (xobj.status === 200) {\n                    resolve(typeof xobj.response === 'string' ? JSON.parse(xobj.response) : xobj.response);\n                } else {\n                    reject('Could not load results from remote service.');\n                }\n            };\n            xobj.send();\n        });\n    };\n    return Query;\n}();\nexports.Query = Query;\n/**\r\n * National Topographic System (NTS)\r\n *\r\n * The following definitions have the form \"name (value constraints) - description\"\r\n *\r\n * Sheet (two or three digits)      - aka \"Map Numbers\" are blocks of approximately 4,915,200 hectares.\r\n * Map Units Subdivision ([A-P])    - each sheet is subdivided further into 16 blocks, approximately 307,200 hectares\r\n * Map Sheet Unit ([1-16])          - each map unit is subdivided further into 16 blocks, approximately 19,200 hectares\r\n * Blocks ([A-L])                   - each map sheet unit is subdivided further into 12 blocks, approximately 1600 hectares\r\n * Units ([1-100]*)                 - each block is finally divided into 100 units, approximately 64 hectares\r\n *\r\n * Two subsets of the complete NTS format is supported:\r\n *     - Sheet and Map Unit Subdivision\r\n *     - Sheet, Map Unit Subdivision, and Map Sheet Unit\r\n *\r\n * Note that \"Blocks\" and \"Units\" are currently not supported on geogratis and are ignored on the query.\r\n */\n\nvar NTSQuery = /** @class */function (_super) {\n    __extends(NTSQuery, _super);\n    function NTSQuery(config, query) {\n        var _this = this;\n        // front pad 0 if NTS starts with two digits\n        query = !parseInt(query[2]) ? '0' + query : query;\n        _this = _super.call(this, config, query) || this;\n        _this.unitName = query;\n        _this.onComplete = new Promise(function (resolve, reject) {\n            _this.locateByQuery().then(function (lr) {\n                // query check added since it can be null but will never be in this case (make TS happy)\n                if (lr.length > 0 && _this.query) {\n                    var allSheets = _this.locateToResult(lr);\n                    _this.unit = allSheets.splice(allSheets.findIndex(function (x) {\n                        return x.nts === _this.query;\n                    }), 1)[0];\n                    _this.mapSheets = allSheets;\n                    _this.featureResults = _this.unit;\n                    _this.nameByLatLon(_this.unit.LatLon.lat, _this.unit.LatLon.lon).then(function (r) {\n                        _this.results = r;\n                        resolve(_this);\n                    });\n                } else {\n                    reject('Not found');\n                }\n            });\n        });\n        return _this;\n    }\n    NTSQuery.prototype.locateToResult = function (lrl) {\n        var _this = this;\n        var results = lrl.map(function (ls) {\n            var title = ls.title.split(' ');\n            return {\n                nts: title.shift() || '',\n                location: title.join(' '),\n                code: 'NTS',\n                desc: _this.config.types.allTypes.NTS,\n                LatLon: { lat: ls.geometry.coordinates[1], lon: ls.geometry.coordinates[0] },\n                bbox: ls.bbox\n            };\n        });\n        return results;\n    };\n    NTSQuery.prototype.equals = function (otherQ) {\n        return this.unitName === otherQ.unitName;\n    };\n    return NTSQuery;\n}(Query);\nexports.NTSQuery = NTSQuery;\n\nvar FSAQuery = /** @class */function (_super) {\n    __extends(FSAQuery, _super);\n    function FSAQuery(config, query) {\n        var _this = this;\n        query = query.substring(0, 3).toUpperCase();\n        _this = _super.call(this, config, query) || this;\n        _this.onComplete = new Promise(function (resolve, reject) {\n            _this.formatLocationResult().then(function (fLR) {\n                if (fLR) {\n                    _this.featureResults = fLR;\n                    _this.nameByLatLon(fLR.LatLon.lat, fLR.LatLon.lon, Object.keys(fLR._provinces).map(function (x) {\n                        return parseInt(x);\n                    })).then(function (r) {\n                        _this.results = r;\n                        resolve(_this);\n                    });\n                } else {\n                    reject('FSA code given cannot be found.');\n                }\n            });\n        });\n        return _this;\n    }\n    FSAQuery.prototype.formatLocationResult = function () {\n        var _this = this;\n        return this.locateByQuery().then(function (locateResponseList) {\n            // query check added since it can be null but will never be in this case (make TS happy)\n            if (locateResponseList.length === 1 && _this.query) {\n                var provList_1 = _this.config.provinces.fsaToProvinces(_this.query);\n                return {\n                    fsa: _this.query,\n                    code: 'FSA',\n                    desc: _this.config.types.allTypes.FSA,\n                    province: Object.keys(provList_1).map(function (i) {\n                        return provList_1[i];\n                    }).join(','),\n                    _provinces: provList_1,\n                    LatLon: { lat: locateResponseList[0].geometry.coordinates[1], lon: locateResponseList[0].geometry.coordinates[0] }\n                };\n            }\n        });\n    };\n    return FSAQuery;\n}(Query);\nexports.FSAQuery = FSAQuery;\n\n/***/ }),\n\n/***/ 92:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (language) {\n    return provinceObj[language] = provinceObj[language] ? provinceObj[language] : new Provinces(language);\n};\n\nvar _provinces = __webpack_require__(93);\n\nvar jsonprovs = _interopRequireWildcard(_provinces);\n\nvar _fsa_to_prov = __webpack_require__(94);\n\nvar jsonfsaToProv = _interopRequireWildcard(_fsa_to_prov);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar provinceObj = {};\nvar fsaToProv = jsonfsaToProv;\nvar provs = jsonprovs;\nvar Provinces = /** @class */function () {\n    function Provinces(language) {\n        var _this = this;\n        this.list = {};\n        Object.keys(provs[language]).forEach(function (provKey) {\n            _this.list[provKey] = provs[language][provKey];\n        });\n    }\n    Provinces.prototype.fsaToProvinces = function (fsa) {\n        var _this = this;\n        var genericObj = {};\n        // either a provincial code, or an array of them\n        var provCodes = fsaToProv[fsa.substring(0, 1).toUpperCase()];\n        if (typeof provCodes === 'number') {\n            provCodes = [provCodes];\n        }\n        provCodes.forEach(function (n) {\n            genericObj[n] = _this.list[n];\n        });\n        return genericObj;\n    };\n    return Provinces;\n}();\n\n/***/ }),\n\n/***/ 93:\n/***/ (function(module, exports) {\n\nmodule.exports = {\"en\":{\"10\":\"Newfoundland and Labrador\",\"11\":\"Prince Edward Island\",\"12\":\"Nova Scotia\",\"13\":\"New Brunswick\",\"24\":\"Quebec\",\"35\":\"Ontario\",\"46\":\"Manitoba\",\"47\":\"Saskatchewan\",\"48\":\"Alberta\",\"59\":\"British Columbia\",\"60\":\"Yukon\",\"61\":\"Northwest Territories\",\"62\":\"Nunavut\",\"72\":\"Undersea Feature\",\"73\":\"International Waters\"},\"fr\":{\"10\":\"Terre-Neuve-et-Labrador\",\"11\":\"Île-du-Prince-Édouard\",\"12\":\"Nouvelle-Écosse\",\"13\":\"Nouveau-Brunswick\",\"24\":\"Québec\",\"35\":\"Ontario\",\"46\":\"Manitoba\",\"47\":\"Saskatchewan\",\"48\":\"Alberta\",\"59\":\"Colombie-Britannique\",\"60\":\"Yukon\",\"61\":\"Territoires du Nord-Ouest\",\"62\":\"Nunavut\",\"72\":\"Entité sous-marine\",\"73\":\"Eaux internationales\"}}\n\n/***/ }),\n\n/***/ 94:\n/***/ (function(module, exports) {\n\nmodule.exports = {\"A\":10,\"B\":12,\"C\":11,\"E\":13,\"G\":24,\"H\":24,\"J\":24,\"K\":35,\"L\":35,\"M\":35,\"N\":35,\"P\":35,\"R\":46,\"S\":47,\"T\":48,\"V\":59,\"X\":[62,61],\"Y\":60}\n\n/***/ }),\n\n/***/ 95:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (language) {\n    return typeObj[language] = typeObj[language] ? typeObj[language] : new Types(language);\n};\n\nvar _types = __webpack_require__(96);\n\nvar jsontypes = _interopRequireWildcard(_types);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar typeObj = {};\nvar types = jsontypes;\nvar Types = /** @class */function () {\n    function Types(language) {\n        var _this = this;\n        this.allTypes = {};\n        this.validTypes = {};\n        this.filterComplete = false;\n        Object.keys(types[language]).forEach(function (typeKey) {\n            _this.allTypes[typeKey] = types[language][typeKey];\n            _this.validTypes[typeKey] = types[language][typeKey];\n        });\n    }\n    Types.prototype.filterValidTypes = function (include, exclude) {\n        if (this.filterComplete) {\n            return this.validTypes;\n        }\n        include = typeof include === 'string' ? [include] : include;\n        exclude = typeof exclude === 'string' ? [exclude] : exclude;\n        var setExclusion = include || exclude ? include && include.length > 0 || exclude && exclude.length : undefined;\n        if (setExclusion) {\n            var typeSet = Object.keys(this.validTypes);\n            var keySet_1 = include || exclude || [];\n            var invalidKeys = typeSet.slice().filter(function (x) {\n                return !setExclusion === (keySet_1.indexOf(x) !== -1);\n            });\n            for (var _i = 0, invalidKeys_1 = invalidKeys; _i < invalidKeys_1.length; _i++) {\n                var key = invalidKeys_1[_i];\n                delete this.validTypes[key];\n            }\n        }\n        this.filterComplete = true;\n        return this.validTypes;\n    };\n    return Types;\n}();\n\n/***/ }),\n\n/***/ 96:\n/***/ (function(module, exports) {\n\nmodule.exports = {\"en\":{\"FSA\":\"Forward Sortation Area\",\"NTS\":\"National Topographic System\",\"PROV\":\"Province\",\"TERR\":\"Territory\",\"CITY\":\"City\",\"TOWN\":\"Town\",\"VILG\":\"Village\",\"HAM\":\"Hamlet\",\"UTM\":\"Upper Tier Municipality\",\"LTM\":\"Lower Tier Municipality\",\"STM\":\"Single Tier Municipality\",\"MUN1\":\"Other Municipal-District Area-Major Agglom.\",\"MUN2\":\"Other Municipal-District Area-Miscellaneous\",\"UNP\":\"Unincorporated place\",\"IR\":\"Indian Reserve\",\"GEOG\":\"Geographical Area\",\"PARK\":\"Conservation Area\",\"MIL\":\"Military Area\",\"RIV\":\"River\",\"RIVF\":\"River Feature\",\"FALL\":\"Falls\",\"LAKE\":\"Lake\",\"SPRG\":\"Spring\",\"SEA\":\"Sea\",\"SEAF\":\"Sea Feature\",\"SEAU\":\"Undersea Feature\",\"CHAN\":\"Channel\",\"RAP\":\"Rapids\",\"BAY\":\"Bay\",\"CAPE\":\"Cape\",\"BCH\":\"Beach\",\"SHL\":\"Shoal\",\"ISL\":\"Island\",\"CLF\":\"Cliff\",\"MTN\":\"Mountain\",\"VALL\":\"Valley\",\"PLN\":\"Plain\",\"CAVE\":\"Cave\",\"CRAT\":\"Crater\",\"GLAC\":\"Glacier\",\"FOR\":\"Forest\",\"VEGL\":\"Low Vegetation\",\"MISC\":\"Miscellaneous\",\"RAIL\":\"Railway Feature\",\"ROAD\":\"Road Feature\",\"AIR\":\"Air Navigation Feature\",\"MAR\":\"Marine Navigation Feature\",\"HYDR\":\"Hydraulic Construction\",\"RECR\":\"Recreational Site\",\"RES\":\"Natural Resources Site\",\"CAMP\":\"Miscellaneous Campsite\",\"SITE\":\"Miscellaneous Site\"},\"fr\":{\"FSA\":\"Région De Tri D'Acheminement\",\"NTS\":\"Système National De Référence Cartographique\",\"PROV\":\"Province\",\"TERR\":\"Territoire\",\"CITY\":\"Ville\",\"TOWN\":\"Ville\",\"VILG\":\"Village\",\"HAM\":\"Hameau\",\"UTM\":\"Municipalité de palier supérieure\",\"LTM\":\"Municipalité de palier inférieur\",\"STM\":\"Municipalité de palier simple\",\"MUN1\":\"Autre zone municip.-District-Agglom. majeure\",\"MUN2\":\"Autre zone municipale-District-Divers\",\"UNP\":\"Lieu non organisé\",\"IR\":\"Réserve indienne\",\"GEOG\":\"Zone géographique\",\"PARK\":\"Zone de préservation\",\"MIL\":\"Réserve militaire\",\"RIV\":\"Cours d'eau\",\"RIVF\":\"Entité fluviale\",\"FALL\":\"Chute\",\"LAKE\":\"Lac\",\"SPRG\":\"Source\",\"SEA\":\"Mer\",\"SEAF\":\"Entité maritime\",\"SEAU\":\"Entité sous-marine\",\"CHAN\":\"Chenal\",\"RAP\":\"Rapide\",\"BAY\":\"Baie\",\"CAPE\":\"Cap\",\"BCH\":\"Plage\",\"SHL\":\"Haut-fond\",\"ISL\":\"Île\",\"CLF\":\"Escarpement\",\"MTN\":\"Montagne\",\"VALL\":\"Vallée\",\"PLN\":\"Plaine\",\"CAVE\":\"Caverne\",\"CRAT\":\"Cratère\",\"GLAC\":\"Glacier\",\"FOR\":\"Forêt\",\"VEGL\":\"Végétation basse\",\"MISC\":\"Divers\",\"RAIL\":\"Entité ferroviaire\",\"ROAD\":\"Entité routière\",\"AIR\":\"Entité de navigation aérienne\",\"MAR\":\"Entité de navigation maritime\",\"HYDR\":\"Construction hydraulique\",\"RECR\":\"Site récréationnel\",\"RES\":\"Site de ressources naturelles\",\"CAMP\":\"Camp-Divers\",\"SITE\":\"Site-Divers\"}}\n\n/***/ }),\n\n/***/ 97:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.isFSAResult = isFSAResult;\nexports.isNTSResult = isNTSResult;\nfunction isFSAResult(result) {\n    return !!result.fsa;\n}\nfunction isNTSResult(result) {\n    return !!result.nts;\n}\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// geosearch.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 90);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 71db2e2eeddc7787575f","import * as Q from './query';\r\nimport Provinces from './provinces';\r\nimport Types from './types';\r\nimport * as defs from './definitions';\r\nvar GEO_LOCATE_URL = 'https://geogratis.gc.ca/services/geolocation/@{language}/locate';\r\nvar GEO_NAMES_URL = 'https://geogratis.gc.ca/services/geoname/@{language}/geonames.json';\r\nvar lastQuery;\r\nvar GeoSearch = /** @class */ (function () {\r\n    function GeoSearch(uConfig) {\r\n        uConfig = uConfig ? uConfig : {};\r\n        var language = uConfig.language ? uConfig.language : 'en';\r\n        // set default URLS if none provided and search/replace language in string (if exists)\r\n        var geoLocateUrl = uConfig.geoLocateUrl ? uConfig.geoLocateUrl : GEO_LOCATE_URL;\r\n        var geoNameUrl = uConfig.geoNameUrl ? uConfig.geoNameUrl : GEO_NAMES_URL;\r\n        geoLocateUrl = geoLocateUrl.replace('@{language}', language);\r\n        geoNameUrl = geoNameUrl.replace('@{language}', language);\r\n        this.config = {\r\n            language: language,\r\n            types: Types(language),\r\n            provinces: Provinces(language),\r\n            maxResults: uConfig.maxResults ? uConfig.maxResults : 100,\r\n            geoNameUrl: geoNameUrl,\r\n            geoLocateUrl: geoLocateUrl\r\n        };\r\n        this.config.types.filterValidTypes(uConfig.includeTypes, uConfig.excludeTypes);\r\n    }\r\n    GeoSearch.prototype.ui = function (resultHandler, featureHandler, input, resultContainer, featureContainer) {\r\n        // bind scope of provided iterator to this class, or set to internal resultIterator implementation for default behaviour\r\n        this.resultHandler = resultHandler ? resultHandler.bind(this) : this.defaultResultHandler;\r\n        this.featureHandler = featureHandler ? featureHandler.bind(this) : this.defaultFeatureHandler;\r\n        this.docFrag = document.createDocumentFragment();\r\n        if (!input) {\r\n            input = document.createElement('input');\r\n            this.docFrag.appendChild(input);\r\n        }\r\n        input.onkeyup = this.inputChanged.bind(this);\r\n        if (!featureContainer) {\r\n            this.featureContainer = document.createElement('div');\r\n            this.docFrag.appendChild(this.featureContainer);\r\n        }\r\n        else {\r\n            this.featureContainer = featureContainer;\r\n        }\r\n        if (!resultContainer) {\r\n            this.resultContainer = document.createElement('div');\r\n            this.docFrag.appendChild(this.resultContainer);\r\n        }\r\n        else {\r\n            this.resultContainer = resultContainer;\r\n        }\r\n        this.resultContainer.classList.add('geosearch-ui');\r\n        this.featureContainer.classList.add('geosearch-ui');\r\n        return this;\r\n    };\r\n    GeoSearch.prototype.defaultResultHandler = function (results) {\r\n        var ul = document.createElement('ul');\r\n        results.reverse().forEach(function (r) {\r\n            var li = document.createElement('li');\r\n            li.innerHTML = r.name + \" (\" + r.type + \")\" + (r.location ? ', ' + r.location : '') + \", \" + r.province + \" @ lat: \" + r.LatLon.lat + \", lon: \" + r.LatLon.lon;\r\n            ul.appendChild(li);\r\n        });\r\n        return ul;\r\n    };\r\n    GeoSearch.prototype.defaultFeatureHandler = function (fR) {\r\n        var output;\r\n        if (defs.isFSAResult(fR)) {\r\n            output = fR.fsa + \" - FSA located in \" + fR.province + \" @ lat: \" + fR.LatLon.lat + \", lon: \" + fR.LatLon.lon;\r\n        }\r\n        else {\r\n            output = fR.nts + \" - NTS located in \" + fR.location + \" @ lat: \" + fR.LatLon.lat + \", lon: \" + fR.LatLon.lon;\r\n        }\r\n        var p = document.createElement('p');\r\n        p.innerHTML = output;\r\n        return p;\r\n    };\r\n    GeoSearch.prototype.inputChanged = function (evt) {\r\n        var _this = this;\r\n        var qValue = evt.target.value;\r\n        if (qValue.length > 2 && qValue !== lastQuery) {\r\n            lastQuery = qValue;\r\n            while (this.resultContainer.firstChild) {\r\n                this.resultContainer.removeChild(this.resultContainer.firstChild);\r\n            }\r\n            while (this.featureContainer.firstChild) {\r\n                this.featureContainer.removeChild(this.featureContainer.firstChild);\r\n            }\r\n            this.query(qValue).onComplete.then(function (q) {\r\n                if (q.featureResults) {\r\n                    _this.featureContainer.appendChild(_this.featureHandler(q.featureResults));\r\n                }\r\n                _this.resultContainer.appendChild(_this.resultHandler(q.results));\r\n            }).catch(function (err) {\r\n                var p = document.createElement('p');\r\n                p.innerHTML = err;\r\n                _this.resultContainer.appendChild(p);\r\n            });\r\n        }\r\n    };\r\n    Object.defineProperty(GeoSearch.prototype, \"htmlElem\", {\r\n        get: function () {\r\n            return this.docFrag;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    GeoSearch.prototype.query = function (query) {\r\n        return Q.make(this.config, query);\r\n    };\r\n    return GeoSearch;\r\n}());\r\nexport { GeoSearch };\r\nif (window) {\r\n    window.GeoSearch = GeoSearch;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nexport function make(config, query) {\r\n    // FSA test\r\n    if (/^[ABCEGHJKLMNPRSTVXY]\\d[A-Z]/.test(query)) {\r\n        return new FSAQuery(config, query);\r\n        // Partial NTS match (Sheet and Map Unit Subdivision)\r\n    }\r\n    else if (/^\\d{2,3}[A-P]/.test(query)) {\r\n        query = query.substring(0, 6).toUpperCase();\r\n        return new NTSQuery(config, query);\r\n        // name based search\r\n    }\r\n    else if (/^[A-Za-z]/.test(query)) {\r\n        var q_1 = new Query(config, query);\r\n        q_1.onComplete = q_1.search().then(function (results) {\r\n            q_1.results = results;\r\n            return q_1;\r\n        });\r\n        return q_1;\r\n        // posible street address search (not supported) or contains special characters\r\n    }\r\n    else {\r\n        var q_2 = new Query(config, query);\r\n        q_2.onComplete = new Promise(function (resolve, reject) { return resolve(q_2); });\r\n        return q_2;\r\n    }\r\n}\r\nvar Query = /** @class */ (function () {\r\n    function Query(config, query) {\r\n        this.suggestions = [];\r\n        this.results = [];\r\n        this.query = query;\r\n        this.config = config;\r\n    }\r\n    Query.prototype.getUrl = function (useLocate, restrict, altQuery, lat, lon) {\r\n        var url = '';\r\n        var query = altQuery ? altQuery : this.query;\r\n        if (useLocate) {\r\n            url = this.config.geoLocateUrl + '?q=' + query;\r\n        }\r\n        else if (lat && lon) {\r\n            url = this.config.geoNameUrl + \"?lat=\" + lat + \"&lon=\" + lon + \"&num=\" + this.config.maxResults;\r\n        }\r\n        else {\r\n            url = this.config.geoNameUrl + \"?q=\" + query + \"&num=\" + this.config.maxResults;\r\n        }\r\n        if (restrict) {\r\n            if (restrict.length === 4) {\r\n                url += \"&bbox=\" + restrict.join(',');\r\n            }\r\n            else {\r\n                url += \"&province=\" + restrict.join(',');\r\n            }\r\n        }\r\n        return url;\r\n    };\r\n    Query.prototype.normalizeNameItems = function (items) {\r\n        var _this = this;\r\n        return items.filter(function (i) { return _this.config.types.validTypes[i.concise.code]; }).map(function (i) {\r\n            return {\r\n                name: i.name,\r\n                location: i.location,\r\n                province: _this.config.provinces.list[i.province.code],\r\n                type: _this.config.types.allTypes[i.concise.code],\r\n                LatLon: { lat: i.latitude, lon: i.longitude },\r\n                bbox: i.bbox\r\n            };\r\n        });\r\n    };\r\n    Query.prototype.search = function (restrict) {\r\n        var _this = this;\r\n        return this.jsonRequest(this.getUrl(false, restrict)).then(function (r) { return _this.normalizeNameItems(r.items); });\r\n    };\r\n    Query.prototype.nameByLatLon = function (lat, lon, restrict) {\r\n        var _this = this;\r\n        return this.jsonRequest(this.getUrl(false, restrict, undefined, lat, lon)).then(function (r) { return _this.normalizeNameItems(r.items); });\r\n    };\r\n    Query.prototype.locateByQuery = function (altQuery) {\r\n        return this.jsonRequest(this.getUrl(true, undefined, altQuery));\r\n    };\r\n    Query.prototype.jsonRequest = function (url) {\r\n        return new Promise(function (resolve, reject) {\r\n            var xobj = new XMLHttpRequest();\r\n            xobj.open('GET', url, true);\r\n            xobj.responseType = 'json';\r\n            xobj.onload = function () {\r\n                if (xobj.status === 200) {\r\n                    resolve(typeof xobj.response === 'string' ? JSON.parse(xobj.response) : xobj.response);\r\n                }\r\n                else {\r\n                    reject('Could not load results from remote service.');\r\n                }\r\n            };\r\n            xobj.send();\r\n        });\r\n    };\r\n    return Query;\r\n}());\r\nexport { Query };\r\n/**\r\n * National Topographic System (NTS)\r\n *\r\n * The following definitions have the form \"name (value constraints) - description\"\r\n *\r\n * Sheet (two or three digits)      - aka \"Map Numbers\" are blocks of approximately 4,915,200 hectares.\r\n * Map Units Subdivision ([A-P])    - each sheet is subdivided further into 16 blocks, approximately 307,200 hectares\r\n * Map Sheet Unit ([1-16])          - each map unit is subdivided further into 16 blocks, approximately 19,200 hectares\r\n * Blocks ([A-L])                   - each map sheet unit is subdivided further into 12 blocks, approximately 1600 hectares\r\n * Units ([1-100]*)                 - each block is finally divided into 100 units, approximately 64 hectares\r\n *\r\n * Two subsets of the complete NTS format is supported:\r\n *     - Sheet and Map Unit Subdivision\r\n *     - Sheet, Map Unit Subdivision, and Map Sheet Unit\r\n *\r\n * Note that \"Blocks\" and \"Units\" are currently not supported on geogratis and are ignored on the query.\r\n */\r\nvar NTSQuery = /** @class */ (function (_super) {\r\n    __extends(NTSQuery, _super);\r\n    function NTSQuery(config, query) {\r\n        var _this = this;\r\n        // front pad 0 if NTS starts with two digits\r\n        query = !parseInt(query[2]) ? '0' + query : query;\r\n        _this = _super.call(this, config, query) || this;\r\n        _this.unitName = query;\r\n        _this.onComplete = new Promise(function (resolve, reject) {\r\n            _this.locateByQuery().then(function (lr) {\r\n                // query check added since it can be null but will never be in this case (make TS happy)\r\n                if (lr.length > 0 && _this.query) {\r\n                    var allSheets = _this.locateToResult(lr);\r\n                    _this.unit = allSheets.splice(allSheets.findIndex(function (x) { return x.nts === _this.query; }), 1)[0];\r\n                    _this.mapSheets = allSheets;\r\n                    _this.featureResults = _this.unit;\r\n                    _this.nameByLatLon(_this.unit.LatLon.lat, _this.unit.LatLon.lon).then(function (r) {\r\n                        _this.results = r;\r\n                        resolve(_this);\r\n                    });\r\n                }\r\n                else {\r\n                    reject('Not found');\r\n                }\r\n            });\r\n        });\r\n        return _this;\r\n    }\r\n    NTSQuery.prototype.locateToResult = function (lrl) {\r\n        var _this = this;\r\n        var results = lrl.map(function (ls) {\r\n            var title = ls.title.split(' ');\r\n            return {\r\n                nts: title.shift() || '',\r\n                location: title.join(' '),\r\n                code: 'NTS',\r\n                desc: _this.config.types.allTypes.NTS,\r\n                LatLon: { lat: ls.geometry.coordinates[1], lon: ls.geometry.coordinates[0] },\r\n                bbox: ls.bbox\r\n            };\r\n        });\r\n        return results;\r\n    };\r\n    NTSQuery.prototype.equals = function (otherQ) {\r\n        return this.unitName === otherQ.unitName;\r\n    };\r\n    return NTSQuery;\r\n}(Query));\r\nexport { NTSQuery };\r\nvar FSAQuery = /** @class */ (function (_super) {\r\n    __extends(FSAQuery, _super);\r\n    function FSAQuery(config, query) {\r\n        var _this = this;\r\n        query = query.substring(0, 3).toUpperCase();\r\n        _this = _super.call(this, config, query) || this;\r\n        _this.onComplete = new Promise(function (resolve, reject) {\r\n            _this.formatLocationResult().then(function (fLR) {\r\n                if (fLR) {\r\n                    _this.featureResults = fLR;\r\n                    _this.nameByLatLon(fLR.LatLon.lat, fLR.LatLon.lon, Object.keys(fLR._provinces).map(function (x) { return parseInt(x); })).then(function (r) {\r\n                        _this.results = r;\r\n                        resolve(_this);\r\n                    });\r\n                }\r\n                else {\r\n                    reject('FSA code given cannot be found.');\r\n                }\r\n            });\r\n        });\r\n        return _this;\r\n    }\r\n    FSAQuery.prototype.formatLocationResult = function () {\r\n        var _this = this;\r\n        return this.locateByQuery().then(function (locateResponseList) {\r\n            // query check added since it can be null but will never be in this case (make TS happy)\r\n            if (locateResponseList.length === 1 && _this.query) {\r\n                var provList_1 = _this.config.provinces.fsaToProvinces(_this.query);\r\n                return {\r\n                    fsa: _this.query,\r\n                    code: 'FSA',\r\n                    desc: _this.config.types.allTypes.FSA,\r\n                    province: Object.keys(provList_1).map(function (i) { return provList_1[i]; }).join(','),\r\n                    _provinces: provList_1,\r\n                    LatLon: { lat: locateResponseList[0].geometry.coordinates[1], lon: locateResponseList[0].geometry.coordinates[0] }\r\n                };\r\n            }\r\n        });\r\n    };\r\n    return FSAQuery;\r\n}(Query));\r\nexport { FSAQuery };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/query.ts","import * as jsonprovs from '../data/provinces.json';\r\nimport * as jsonfsaToProv from '../data/fsa_to_prov.json';\r\nvar provinceObj = {};\r\nvar fsaToProv = jsonfsaToProv;\r\nvar provs = jsonprovs;\r\nvar Provinces = /** @class */ (function () {\r\n    function Provinces(language) {\r\n        var _this = this;\r\n        this.list = {};\r\n        Object.keys(provs[language]).forEach(function (provKey) {\r\n            _this.list[provKey] = provs[language][provKey];\r\n        });\r\n    }\r\n    Provinces.prototype.fsaToProvinces = function (fsa) {\r\n        var _this = this;\r\n        var genericObj = {};\r\n        // either a provincial code, or an array of them\r\n        var provCodes = fsaToProv[fsa.substring(0, 1).toUpperCase()];\r\n        if (typeof provCodes === 'number') {\r\n            provCodes = [provCodes];\r\n        }\r\n        provCodes.forEach(function (n) {\r\n            genericObj[n] = _this.list[n];\r\n        });\r\n        return genericObj;\r\n    };\r\n    return Provinces;\r\n}());\r\nexport default function (language) {\r\n    return provinceObj[language] = provinceObj[language] ? provinceObj[language] : new Provinces(language);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/provinces.ts","module.exports = {\"en\":{\"10\":\"Newfoundland and Labrador\",\"11\":\"Prince Edward Island\",\"12\":\"Nova Scotia\",\"13\":\"New Brunswick\",\"24\":\"Quebec\",\"35\":\"Ontario\",\"46\":\"Manitoba\",\"47\":\"Saskatchewan\",\"48\":\"Alberta\",\"59\":\"British Columbia\",\"60\":\"Yukon\",\"61\":\"Northwest Territories\",\"62\":\"Nunavut\",\"72\":\"Undersea Feature\",\"73\":\"International Waters\"},\"fr\":{\"10\":\"Terre-Neuve-et-Labrador\",\"11\":\"Île-du-Prince-Édouard\",\"12\":\"Nouvelle-Écosse\",\"13\":\"Nouveau-Brunswick\",\"24\":\"Québec\",\"35\":\"Ontario\",\"46\":\"Manitoba\",\"47\":\"Saskatchewan\",\"48\":\"Alberta\",\"59\":\"Colombie-Britannique\",\"60\":\"Yukon\",\"61\":\"Territoires du Nord-Ouest\",\"62\":\"Nunavut\",\"72\":\"Entité sous-marine\",\"73\":\"Eaux internationales\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./data/provinces.json\n// module id = 93\n// module chunks = 0 1","module.exports = {\"A\":10,\"B\":12,\"C\":11,\"E\":13,\"G\":24,\"H\":24,\"J\":24,\"K\":35,\"L\":35,\"M\":35,\"N\":35,\"P\":35,\"R\":46,\"S\":47,\"T\":48,\"V\":59,\"X\":[62,61],\"Y\":60}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./data/fsa_to_prov.json\n// module id = 94\n// module chunks = 0 1","import * as jsontypes from '../data/types.json';\r\nvar typeObj = {};\r\nvar types = jsontypes;\r\nvar Types = /** @class */ (function () {\r\n    function Types(language) {\r\n        var _this = this;\r\n        this.allTypes = {};\r\n        this.validTypes = {};\r\n        this.filterComplete = false;\r\n        Object.keys(types[language]).forEach(function (typeKey) {\r\n            _this.allTypes[typeKey] = types[language][typeKey];\r\n            _this.validTypes[typeKey] = types[language][typeKey];\r\n        });\r\n    }\r\n    Types.prototype.filterValidTypes = function (include, exclude) {\r\n        if (this.filterComplete) {\r\n            return this.validTypes;\r\n        }\r\n        include = typeof include === 'string' ? [include] : include;\r\n        exclude = typeof exclude === 'string' ? [exclude] : exclude;\r\n        var setExclusion = include || exclude ? (include && include.length > 0) || (exclude && exclude.length) : undefined;\r\n        if (setExclusion) {\r\n            var typeSet = Object.keys(this.validTypes);\r\n            var keySet_1 = include || exclude || [];\r\n            var invalidKeys = typeSet.slice().filter(function (x) { return !setExclusion === (keySet_1.indexOf(x) !== -1); });\r\n            for (var _i = 0, invalidKeys_1 = invalidKeys; _i < invalidKeys_1.length; _i++) {\r\n                var key = invalidKeys_1[_i];\r\n                delete this.validTypes[key];\r\n            }\r\n        }\r\n        this.filterComplete = true;\r\n        return this.validTypes;\r\n    };\r\n    return Types;\r\n}());\r\nexport default function (language) {\r\n    return typeObj[language] = typeObj[language] ? typeObj[language] : new Types(language);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/types.ts","module.exports = {\"en\":{\"FSA\":\"Forward Sortation Area\",\"NTS\":\"National Topographic System\",\"PROV\":\"Province\",\"TERR\":\"Territory\",\"CITY\":\"City\",\"TOWN\":\"Town\",\"VILG\":\"Village\",\"HAM\":\"Hamlet\",\"UTM\":\"Upper Tier Municipality\",\"LTM\":\"Lower Tier Municipality\",\"STM\":\"Single Tier Municipality\",\"MUN1\":\"Other Municipal-District Area-Major Agglom.\",\"MUN2\":\"Other Municipal-District Area-Miscellaneous\",\"UNP\":\"Unincorporated place\",\"IR\":\"Indian Reserve\",\"GEOG\":\"Geographical Area\",\"PARK\":\"Conservation Area\",\"MIL\":\"Military Area\",\"RIV\":\"River\",\"RIVF\":\"River Feature\",\"FALL\":\"Falls\",\"LAKE\":\"Lake\",\"SPRG\":\"Spring\",\"SEA\":\"Sea\",\"SEAF\":\"Sea Feature\",\"SEAU\":\"Undersea Feature\",\"CHAN\":\"Channel\",\"RAP\":\"Rapids\",\"BAY\":\"Bay\",\"CAPE\":\"Cape\",\"BCH\":\"Beach\",\"SHL\":\"Shoal\",\"ISL\":\"Island\",\"CLF\":\"Cliff\",\"MTN\":\"Mountain\",\"VALL\":\"Valley\",\"PLN\":\"Plain\",\"CAVE\":\"Cave\",\"CRAT\":\"Crater\",\"GLAC\":\"Glacier\",\"FOR\":\"Forest\",\"VEGL\":\"Low Vegetation\",\"MISC\":\"Miscellaneous\",\"RAIL\":\"Railway Feature\",\"ROAD\":\"Road Feature\",\"AIR\":\"Air Navigation Feature\",\"MAR\":\"Marine Navigation Feature\",\"HYDR\":\"Hydraulic Construction\",\"RECR\":\"Recreational Site\",\"RES\":\"Natural Resources Site\",\"CAMP\":\"Miscellaneous Campsite\",\"SITE\":\"Miscellaneous Site\"},\"fr\":{\"FSA\":\"Région De Tri D'Acheminement\",\"NTS\":\"Système National De Référence Cartographique\",\"PROV\":\"Province\",\"TERR\":\"Territoire\",\"CITY\":\"Ville\",\"TOWN\":\"Ville\",\"VILG\":\"Village\",\"HAM\":\"Hameau\",\"UTM\":\"Municipalité de palier supérieure\",\"LTM\":\"Municipalité de palier inférieur\",\"STM\":\"Municipalité de palier simple\",\"MUN1\":\"Autre zone municip.-District-Agglom. majeure\",\"MUN2\":\"Autre zone municipale-District-Divers\",\"UNP\":\"Lieu non organisé\",\"IR\":\"Réserve indienne\",\"GEOG\":\"Zone géographique\",\"PARK\":\"Zone de préservation\",\"MIL\":\"Réserve militaire\",\"RIV\":\"Cours d'eau\",\"RIVF\":\"Entité fluviale\",\"FALL\":\"Chute\",\"LAKE\":\"Lac\",\"SPRG\":\"Source\",\"SEA\":\"Mer\",\"SEAF\":\"Entité maritime\",\"SEAU\":\"Entité sous-marine\",\"CHAN\":\"Chenal\",\"RAP\":\"Rapide\",\"BAY\":\"Baie\",\"CAPE\":\"Cap\",\"BCH\":\"Plage\",\"SHL\":\"Haut-fond\",\"ISL\":\"Île\",\"CLF\":\"Escarpement\",\"MTN\":\"Montagne\",\"VALL\":\"Vallée\",\"PLN\":\"Plaine\",\"CAVE\":\"Caverne\",\"CRAT\":\"Cratère\",\"GLAC\":\"Glacier\",\"FOR\":\"Forêt\",\"VEGL\":\"Végétation basse\",\"MISC\":\"Divers\",\"RAIL\":\"Entité ferroviaire\",\"ROAD\":\"Entité routière\",\"AIR\":\"Entité de navigation aérienne\",\"MAR\":\"Entité de navigation maritime\",\"HYDR\":\"Construction hydraulique\",\"RECR\":\"Site récréationnel\",\"RES\":\"Site de ressources naturelles\",\"CAMP\":\"Camp-Divers\",\"SITE\":\"Site-Divers\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./data/types.json\n// module id = 96\n// module chunks = 0 1","export function isFSAResult(result) {\r\n    return !!result.fsa;\r\n}\r\nexport function isNTSResult(result) {\r\n    return !!result.nts;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/definitions.ts"],"sourceRoot":""}